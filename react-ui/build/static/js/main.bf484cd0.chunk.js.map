{"version":3,"sources":["components/Dashboard/assets/light.jpg","components/Dashboard/assets/dark.png","components/LoginAndRegistration/LandingPage/assets/landing_dark.jpg","components/LoginAndRegistration/LandingPage/assets/login_card.jpg","components/LoginAndRegistration/LandingPage/assets/signup_card.jpg","components/LoginAndRegistration/LandingPage/assets/forgot_password_card.jpg","components/LoginAndRegistration/useForm.js","components/LoginAndRegistration/Navbar.js","components/LoginAndRegistration/Login.js","components/LoginAndRegistration/Registration.js","components/LoginAndRegistration/ForgotPassword.js","components/LoginAndRegistration/ResetPassword.js","components/LoginAndRegistration/DuoLogin.js","components/Dashboard/ClassViews/SyllabusViewer.js","components/Dashboard/ClassViews/HomePanel.js","components/Dashboard/ClassViews/AnnouncementPanel.js","components/Dashboard/ClassViews/FileUpload.js","components/Dashboard/ClassViews/StudentAssignmentTabs/FileUploadTab.js","components/Dashboard/ClassViews/StudentAssignmentTabs/TextUploadTab.js","components/Dashboard/ClassViews/StudentAssignmentTabs/LinkUploadTab.js","components/Dashboard/ClassViews/StudentAssignmentTabs/SubmissionTab.js","components/Dashboard/ClassViews/StudentAssignmentTabs/CommentsTab.js","components/Dashboard/ClassViews/StudentAssignmentTabs/GradeTab.js","components/Dashboard/ClassViews/StudentAssignment.js","components/Dashboard/ClassViews/InstructorAssignment.js","components/Dashboard/ClassViews/AssignmentPanel.js","components/Dashboard/ClassViews/FilePanel.js","components/Dashboard/ClassViews/VideoPlayer.js","components/Dashboard/ClassViews/LecturePanel.js","components/Dashboard/ClassDialog.js","components/Dashboard/Drawer.js","components/Dashboard/SocketProvider.js","components/Dashboard/ConversationsProvider.js","components/Dashboard/ChatCourses.js","components/Dashboard/CourseConversations.js","components/Dashboard/ChatSidebar.js","components/Dashboard/OpenConversation.js","components/Dashboard/Chat.js","components/Dashboard/Navbar.js","components/Widgets/Announcements.js","components/Widgets/TaskCalendar.js","components/Widgets/AddCourse.js","components/Widgets/CreateAnnouncement.js","components/Widgets/AddToClass.js","components/Widgets/SetRole.js","components/Widgets/UpcomingAssignments.js","components/Widgets/CreateAssignment.js","components/Widgets/UnapprovedFiles.js","components/Widgets/Search.js","components/Dashboard/WidgetCase.js","components/Dashboard/WidgetView.js","components/Dashboard/Dashboard.js","components/LoginAndRegistration/LandingPage/Header.js","components/LoginAndRegistration/LandingPage/ImageCard.js","components/LoginAndRegistration/LandingPage/LandingScroll.js","components/LoginAndRegistration/LandingPage/hook/useWindowPosition.js","components/LoginAndRegistration/LandingPage/LandingPage.js","App.js","index.js"],"names":["module","exports","useForm","initialValues","useState","values","setValues","useStyle","makeStyles","theme","root","width","margin","spacing","display","paperRoot","minHeight","paperContent","padding","navbar","title","textFieldForm","extraItemsForm","links","facebookButton","handleInputChange","e","target","name","value","Navbar","React","anchorEl","setAnchorEl","open","Boolean","classes","AppBar","position","className","color","Toolbar","IconButton","edge","aria-label","onClick","event","currentTarget","Menu","keepMounted","onClose","PaperProps","style","MenuItem","component","Link","to","Typography","variant","email","password","Login","props","useEffect","axios","get","then","res","status","history","push","Paper","Grid","container","justify","TextField","label","onChange","type","Button","size","preventDefault","post","alert","catch","err","response","data","appId","autoLoad","fields","callback","fbID","userID","token","accessToken","signedRequest","firstName","lastName","confirmPassword","Registration","window","ForgotPassword","ResetPassword","validToken","updateValidity","console","log","match","params","DuoLogin","duoAuthState","setAuthState","initDuoFrame","content","json","DuoWebSDK","init","iframe","host","sig_request","sigRequest","submit_callback","submitPostAction","form","signedResponse","sig_response","height","id","SyllabusViewer","courseID","mode","setMode","role","setRole","syllabus","setSyllabus","newSyllabus","setNewSyllabus","useRef","toggleMode","prevMode","flexDirection","marginRight","put","plugins","gfm","children","FormControl","marginTop","multiline","useStyles","drawer","flexShrink","drawerPaper","background","palette","secondary","main","appBar","toolbar","mixins","dialog","GeneralPanel","courseData","overflow","term","List","instructors","map","instructor","ListItem","ListItemText","primary","course_id","GetAnnouncementList","searchValue","announcementList","announcement","date","moment","date_created","local","format","announcement_name","first_name","last_name","toLowerCase","includes","AnnouncementPanel","announcements","setSearchValue","FileUpload","setOpen","endpoint","ext","file","setFile","handleClose","Dialog","aria-labelled-by","aria-described-by","DialogTitle","DialogContent","files","DialogActions","split","slice","formData","FormData","key","append","headers","FileUploadTab","uploadOpen","setUploadOpen","Box","item","xs","panelItems","setValue","fullWidth","rows","LinkUploadTab","SubmissionTab","CommentsTab","GradeTab","grade","setGrade","assignmentID","checkGrade","gradeList","length","String","TabPanel","index","other","hidden","aria-labelledby","p","a11yProps","items","IsSubmitted","submitted","handleChange","newValue","Drawer","anchor","Tabs","Tab","StudentAssignment","selectedAssignment","setSubmitted","submissions","setSubmissions","setFiles","assignment_id","fullScreen","assignment_name","assignment_description","Divider","s","href","url","file_name","flexGrow","menuButton","useInnerStyles","InstructorAssignment","innerClasses","students","setStudents","averageGrade","setAverageGrade","studentsRef","gradesRef","submissionsRef","selectedStudent","setSelectedStudent","gOpen","setGopen","submissionsPerStudent","setSubmissionsPerStudent","addSubmissionsToList","current","addStudentsToList","totalGrade","studentClicked","student","gradeClicked","divider","button","ListItemSecondaryAction","submission","dateString","time_submitted","GradingDialog","newGrade","setNewGrade","studentName","setStudentName","oldGrade","setOldGrade","aria-describedby","DialogContentText","helperText","gradeString","parseFloat","statusText","GetAssignmentList","assignmentList","assignment","deadline","setSelectedAssignment","setSopen","setIopen","AssignmentPanel","assignments","sopen","iopen","GetFileList","fileList","FilePanel","setSelectedFile","setFileList","handleSearchChange","paper","backgroundColor","boxShadow","VideoPlayer","controls","videoFile","LecturePanel","selectedLecture","setSelectedLecture","lectureList","setLectureList","ClassDialog","selectedClass","setCourseData","setAnnouncements","setAssignments","CurrentDrawer","undefined","setSelectedClass","courses","course","course_name","class","SocketContext","createContext","useSocket","useContext","SocketProvider","socket","setSocket","location","hostname","startsWith","newSocket","io","query","close","Provider","ConversationsContext","useConversations","ConversationsProvider","user","conversations","setConversations","selectedConversationIndex","setSelectedConversationIndex","refresh","setRefresh","a","c","people","filter","recipients","recipient","Promise","all","conversation","r","online","conversationID","messages","getConversations","addMessageToConversation","useCallback","message","send_date","sender","prevConversations","newMessage","on","old","off","formattedConversations","fromMe","senderName","selected","selectedConversation","sendMessage","utc","emit","selectConversationIndex","ChatCourses","setSelectedCourseID","setCourses","selectedCourseIndex","setSelectedCourseIndex","coursesRef","getCoursesFromResponse","concat","Error","ListGroup","Item","action","active","CourseConversations","varient","ChatSidebar","selectedCourseID","OpenConversation","text","setText","typingUsers","setTypingUsers","typingTimeout","setTypingTimeout","convoRef","prevTypingUsers","idx","indexOf","splice","setRef","node","scrollIntoView","smooth","startTyping","typing","clearTimeout","setTimeout","lastMessage","diff","duration","humanize","ref","join","Form","onSubmit","Group","InputGroup","Control","as","required","resize","Append","marginLeft","Chat","setUser","notificationButton","search","borderRadius","shape","fade","common","white","breakpoints","up","searchIcon","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","paddingLeft","transition","transitions","create","listbox","zIndex","listStyle","maxHeight","border","cursor","withRouter","widgetNum","align","removeWidgetClick","addWidgetClick","Switch","checked","darkState","handleThemeChange","Announcements","announcementsRef","getAnnouncementsFromResponse","AssignmentDialog","dateSelected","dateSelectedString","toDateString","assignmentdate","TaskCalendar","Date","now","setDate","onClickDay","paddingRight","AddCourse","courseName","courseNumber","courseDept","instructorID","courseTerm","InputLabel","Select","CreateAnnouncement","noCourse","course_term","currentCourse","setCurrentCourse","announcementName","description","classname","displayEmpty","renderValue","AddToClass","SetRole","UpcomingAssignments","CreateAssignment","tAnchorEl","setTAnchorEl","topen","assignmentName","setAssignmentName","setDescription","time","setTime","setDateString","amOrPM","setAmOrPM","handleCloseTime","timeOfDay","day","ITEM_HEIGHT","aria-controls","aria-haspopup","hour","Number","minute","setHours","setMinutes","UnapprovedFiles","setFilter","filesRef","videosRef","assignmentFilesRef","courseFilesRef","getCourseFilesFromResponse","getAssignmentFilesFromResponse","getVideosFromResponse","filelistitem","upload_date","ApprovalDialog","selectedFile","currentFilter","filename","filterString","substring","approved","DisplaySearchResults","searchResults","result","course_dept","course_number","main_role","Search","setSearchQuery","setSearchResults","allWidgets","WidgetSelect","currentWidget","WidgetCase","options","displayWidgets","setCurrentWidget","openDialog","setOpenDialog","widgetPosn","option","backgroundRepeat","backgroundSize","WidgetView","i","currentWidgets","Display","sm","md","backgroundImage","DarkBackground","LightBackground","adminWidgets","studentWidgets","instructorWidgets","currentRoleWidgets","default","Dashboard","setWidgetNum","empty","appbar","appbarWrapper","appbarTitle","fontSize","icon","colorText","textAlign","body","goDown","scrollRoot","Header","setChecked","elevation","Collapse","in","timeout","collapsedHeight","down","media","fontWeight","desc","ImageCard","imageURL","imageUrl","Card","CardActionArea","link","CardMedia","image","CardContent","gutterBottom","LandingScroll","animation","setAnimation","useLayoutEffect","updatePosition","offetSetHeight","document","getElementById","offsetHeight","pageYOffset","addEventListener","removeEventListener","useWindowPosition","LoginPic","SignUpPic","ForgotPasswordPic","LandingDark","LandingPage","CssBaseline","App","setDarkState","paletteType","greenColor","blueColor","createMuiTheme","ThemeProvider","path","exact","render","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.bf484cd0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/light.786017e9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/dark.21445dd4.png\";","module.exports = __webpack_public_path__ + \"static/media/landing_dark.b8a3796f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/login_card.9e68bf47.jpg\";","module.exports = __webpack_public_path__ + \"static/media/signup_card.a7aa1fea.jpg\";","module.exports = __webpack_public_path__ + \"static/media/forgot_password_card.6a18b6f9.jpg\";","import React, { useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nexport default function useForm(initialValues) {\r\n\r\n  const [ values, setValues ] = useState(initialValues);\r\n  const handleInputChange = e => {\r\n    const { name, value } = e.target\r\n    setValues({\r\n      ...values,\r\n      [name]: value\r\n    })\r\n  }\r\n  const useStyle = makeStyles(theme => ({\r\n    root: {\r\n      '& .MuiFormControl-root': {\r\n        width:'60%',\r\n        margin:theme.spacing(1),\r\n        display:'flex'\r\n      }\r\n    },\r\n    paperRoot: {\r\n      minHeight: '100vh',\r\n    },\r\n    paperContent: {\r\n      margin: theme.spacing(4),\r\n      padding: theme.spacing(2)\r\n    },\r\n    navbar: {\r\n      margin:theme.spacing(0)\r\n    },\r\n    title: {\r\n      margin:theme.spacing(1)\r\n    },\r\n    textFieldForm: {\r\n      margin:theme.spacing(1)\r\n    },\r\n    extraItemsForm: {\r\n      margin:theme.spacing(2)\r\n    },\r\n    links: {\r\n      margin:theme.spacing(1)\r\n    },\r\n    facebookButton: {\r\n      margin: theme.spacing(2),\r\n    }\r\n  }))\r\n\r\n  return {\r\n    values,\r\n    setValues,\r\n    handleInputChange,\r\n    useStyle\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { AppBar, Toolbar, IconButton, Typography, Menu, MenuItem } from '@material-ui/core';\r\nimport useForm from './useForm';\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst initialValues = {\r\n}\r\n\r\nexport default function Navbar() {\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const {\r\n    useStyle\r\n  } = useForm(initialValues);\r\n\r\n  const classes = useStyle();\r\n\r\n  return (\r\n    <>\r\n      <AppBar \r\n        position=\"static\"\r\n        className={classes.navbar}\r\n        color=\"primary\">\r\n        <Toolbar>\r\n        <IconButton \r\n          edge=\"start\"\r\n          aria-label=\"menu\"\r\n          onClick={handleClick}>\r\n            <MenuIcon\r\n            color=\"secondary\" />\r\n        </IconButton>\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={open}\r\n          onClose={handleClose}\r\n          PaperProps={{\r\n            style: {\r\n            }\r\n          }}>\r\n          <MenuItem component={Link} to=\"/login\">Login</MenuItem>\r\n          <MenuItem component={Link} to=\"/registration\">Create Account</MenuItem>\r\n          <MenuItem component={Link} to=\"/forgotpassword\">Forgot Password</MenuItem>\r\n        </Menu>\r\n          \r\n        <Typography \r\n          variant=\"h6\"\r\n          color=\"secondary\"\r\n          className={classes.title}>\r\n          instructED\r\n        </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </>\r\n  )\r\n}","import React, { useEffect } from 'react'\r\nimport axios from 'axios'; \r\nimport { Link as MuiLink, Button, Typography, Grid, TextField, Paper } from '@material-ui/core';\r\nimport useForm from './useForm';\r\nimport { Link } from 'react-router-dom';\r\nimport Navbar from './Navbar';\r\nimport FacebookLogin from 'react-facebook-login';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: ''\r\n}\r\n\r\nexport default function Login(props) {\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    useStyle\r\n  } = useForm(initialValues);\r\n\r\n  const classes = useStyle();\r\n\r\n  // If user is already logged in, redirect them to the dashboard.\r\n  useEffect(() => {\r\n    axios.get('/authorize')\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          props.history.push('/dashboard');\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    //Attempts to log the user in using given credentials\r\n    axios.post(\"/authenticate\", values)\r\n      .then(res => {\r\n        //If login is successful\r\n        if (res.status === 200) {\r\n          //Begins Duo Authentication\r\n          props.history.push('/duologin');\r\n        }\r\n        //If the email or password given is not correct\r\n        else if(res.status === 401){\r\n          alert(\"Invalid email or password\");\r\n        }\r\n        //If an account with this email already exists, and is associated with a Facebook account\r\n        else if(res.status === 403){\r\n          alert(\"This account was already created with Facebook\");\r\n        }\r\n      })\r\n      .catch(err => {\r\n        alert(err.response.data);\r\n      });\r\n  };\r\n\r\n  const responseFacebook = (response) => {\r\n    const data = {\r\n      email: response.email,\r\n      name: response.name,\r\n      fbID: response.userID,\r\n      token: response.accessToken,\r\n      signedRequest: response.signedRequest\r\n    };\r\n\r\n    axios.post(\"/authenticate/facebook\", data)\r\n      .then(res => {\r\n        //If login through Facebook was successful\r\n        if (res.status === 200) {\r\n          props.history.push('/duologin');\r\n        }\r\n        //If no Facebook account for given credentials was in the database.\r\n        else if(res.status === 201){\r\n          alert(\"Facebook account added\");\r\n          props.history.push('/duologin');\r\n        }\r\n      })\r\n      .catch(err => {\r\n        alert(err.response.data);\r\n      })\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Paper className={classes.paperRoot}>\r\n        <Navbar />\r\n        <Paper className={classes.paperContent}>\r\n          <form className={classes.root}>\r\n            <Grid container justify=\"center\">\r\n              <Typography variant=\"h2\" color=\"secondary\" className={classes.extraItemsForm}>Sign in to your account</Typography>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"Email\" name=\"email\" value={values.email} onChange={handleInputChange} className={classes.textFieldForm} />\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"Password\" name=\"password\" type=\"password\" value={values.password} onChange={handleInputChange} className={classes.textFieldForm} />\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={onSubmit} className={classes.extraItemsForm}>Login</Button>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <FacebookLogin appId=\"350577486197278\" autoLoad={false} fields=\"name,email,picture\" callback={responseFacebook} className={classes.facebookButton} />\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <MuiLink component={Link} to=\"/registration\" variant=\"body1\" color=\"secondary\" className={classes.links}>Sign up for an account</MuiLink>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <MuiLink component={Link} to=\"/forgotpassword\" variant=\"body1\" color=\"secondary\" className={classes.links}>Forgot password?</MuiLink>\r\n            </Grid>\r\n          </form>\r\n        </Paper>\r\n      </Paper>\r\n    </>\r\n  );\r\n}\r\n","import { Link as MuiLink, Paper, Button, Grid, TextField, Typography } from '@material-ui/core';\r\nimport React, { useState } from 'react'\r\nimport useForm from './useForm';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport Navbar from './Navbar';\r\nimport FacebookLogin from 'react-facebook-login';\r\n\r\nconst initialValues = {\r\n  firstName: '',\r\n  lastName: '',\r\n  email: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n}\r\n\r\nexport default function Registration(props) {\r\n\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    useStyle\r\n  } = useForm(initialValues);\r\n\r\n  const classes = useStyle();\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (values.password !== values.confirmPassword) {\r\n      window.alert(\"Password is not the same\");\r\n    } \r\n    else {\r\n      //Attempts to insert the given values into the database\r\n      axios.post('/users', values)\r\n        .then(res => {\r\n          //If User creation was successful\r\n          if(res.status === 201) {\r\n            alert(\"Account created successfully\");\r\n            //Redirects to the login page\r\n            props.history.push('/login');\r\n          }\r\n          //If the given email is already in use\r\n          else if(res.status === 409){\r\n            alert(\"This email has already been taken\");\r\n          }\r\n        })\r\n        //Catches another undefined error\r\n        .catch(err => {\r\n            alert(err.response.data);\r\n        });\r\n    }\r\n  };\r\n  const responseFacebook = (response) => {\r\n    const data = {\r\n      email: response.email,\r\n      name: response.name,\r\n      fbID: response.userID,\r\n      token: response.accessToken,\r\n      signedRequest: response.signedRequest\r\n    };\r\n\r\n    axios.post('/authenticate/facebook', data)\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          props.history.push('/duologin');\r\n        }\r\n      })\r\n      .catch(err => {\r\n        alert(err.response.data);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Paper className={classes.paperRoot}>\r\n        <Navbar />\r\n        <Paper className={classes.paperContent}>\r\n          <form className={classes.root}>\r\n            <Grid container justify=\"center\">\r\n              <Typography variant=\"h2\" color=\"secondary\" className={classes.extraItemsForm}>Create Account</Typography>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"First Name\" name=\"firstName\" value={values.firstName} onChange={handleInputChange} className={classes.textFieldForm}/>\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"Last Name\" name=\"lastName\" value={values.lastName} onChange={handleInputChange} className={classes.textFieldForm}/>\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"Email\" name=\"email\" value={values.email} onChange={handleInputChange} className={classes.textFieldForm} />\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"Password\" name=\"password\" type=\"password\" value={values.password} onChange={handleInputChange} className={classes.textFieldForm} />\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"Confirm Password\" name=\"confirmPassword\" type=\"password\" value={values.confirmPassword} onChange={handleInputChange} className={classes.textFieldForm} />\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={onSubmit} className={classes.extraItemsForm}>Register</Button>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <MuiLink component={Link} to=\"/login\" color=\"secondary\" variant=\"body1\" className={classes.links}>Already have an account?</MuiLink>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <MuiLink component={Link} to=\"/forgotpassword\" color=\"secondary\" variant=\"body1\" className={classes.links}>Forgot password?</MuiLink>\r\n            </Grid>\r\n          </form>\r\n        </Paper>\r\n      </Paper>\r\n    </>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Link as MuiLink, Button, Typography, Grid, TextField, Paper } from '@material-ui/core';\r\nimport useForm from './useForm';\r\nimport { Link } from 'react-router-dom';\r\nimport Navbar from './Navbar';\r\n\r\nconst initialValues = {\r\n  email: ''\r\n}\r\n\r\nexport default function ForgotPassword(props) {\r\n\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    useStyle\r\n  } = useForm(initialValues);\r\n  const classes = useStyle();\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    axios.post('/forgotPassword', values)\r\n      .then(res => {\r\n        //If recovery email was accepted and sent\r\n        if (res.status === 200) {\r\n          alert(res.data);\r\n        }\r\n        else if(res.status === 404){\r\n          alert(\"Email provided is not associated with any account\");\r\n        }\r\n        else if(res.status === 422){\r\n          alert(\"The account associated with this email was created via Facebook\");\r\n        }\r\n        else if(res.status === 500){\r\n          alert(\"There was an error sending the recovery email\")\r\n        }\r\n      }).catch(err => {\r\n        alert(err.response.data);\r\n      });\r\n    props.history.push('/login');\r\n  };\r\n\r\n  return(\r\n    <>\r\n      <Paper className={classes.paperRoot}>\r\n        <Navbar />\r\n        <Paper className={classes.paperContent}>\r\n          <form className={classes.root}>\r\n            <Grid container justify=\"center\">\r\n              <Typography variant=\"h2\" color=\"secondary\" className={classes.extraItemsForm}>Forgot Password</Typography>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <TextField color=\"secondary\" variant=\"outlined\" label=\"Email\" name=\"email\" value={values.email} onChange={handleInputChange} className={classes.textFieldForm} />\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={onSubmit} className={classes.extraItemsForm}>Get Link</Button>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <MuiLink component={Link} to=\"/login\" color=\"secondary\" variant=\"body1\" className={classes.links}>Already have an account?</MuiLink>\r\n            </Grid>\r\n            <Grid container justify=\"center\">\r\n              <MuiLink component={Link} to=\"/registration\" color=\"secondary\" variant=\"body1\" className={classes.links}>Sign up for an account</MuiLink>\r\n            </Grid>\r\n          </form>\r\n        </Paper>\r\n      </Paper>\r\n    </>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Button, Typography, Grid, TextField, Paper } from '@material-ui/core';\r\nimport useForm from './useForm';\r\nimport Navbar from './Navbar';\r\n\r\nconst initialValues = {\r\n  password: '',\r\n  confirmPassword: ''\r\n}\r\n\r\nexport default function ResetPassword(props) {\r\n  \r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    useStyle\r\n  } = useForm(initialValues);\r\n\r\n  const [ validToken, updateValidity ] = useState(false);\r\n\r\n  const classes = useStyle();\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (values.password === values.confirmPassword) {\r\n      axios.post('/updatePassword', { \r\n        token: props.match.params.token,\r\n        password: values.password\r\n      }).then(res => {\r\n        if (res.status === 201) {\r\n          alert(\"Password has been updated.\");\r\n        }\r\n      }).catch(err => {\r\n        alert('Something went wrong. Please try again later.');\r\n      });\r\n      props.history.push('/login');\r\n    } else {\r\n      alert(\"Passwords are not the same!\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('CHECKING TOKEN');\r\n    console.log(props.match.params.token);\r\n    axios.get(`/resetPassword/${props.match.params.token}`)\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          console.log('GOOD TOKEN');\r\n          updateValidity(true);\r\n        }\r\n      }).catch(err => {\r\n        console.log('BAD TOKEN');\r\n        updateValidity(false);\r\n      });\r\n  }, []);\r\n\r\n  if (validToken) {\r\n    console.log('SENDING GOOD TOKEN PAGE');\r\n    return (\r\n      <>\r\n        <Paper className={classes.paperRoot}>\r\n          <Navbar />\r\n          <Paper className={classes.paperContent}>\r\n            <form className={classes.root}>\r\n              <Grid container justify=\"center\">\r\n                <Typography variant=\"h2\" color=\"secondary\" className={classes.extraItemsForm}>Create New Password</Typography>\r\n              </Grid>\r\n              <Grid container justify=\"center\">\r\n                <TextField color=\"secondary\" variant=\"outlined\" label=\"New Password\" name=\"password\" type=\"password\" value={values.password} onChange={handleInputChange} className={classes.textFieldForm} />\r\n                <TextField color=\"secondary\" variant=\"outlined\" label=\"Confirm Password\" name=\"confirmPassword\" type=\"password\" value={values.confirmPassword} onChange={handleInputChange} className={classes.textFieldForm} />\r\n              </Grid>\r\n              <Grid container justify=\"center\">\r\n                <Button color=\"primary\" variant=\"contained\" size=\"large\" onClick={onSubmit} className={classes.extraItemsForm}>Reset Password</Button>\r\n              </Grid>\r\n            </form>\r\n          </Paper>\r\n        </Paper>\r\n      </>\r\n    );\r\n  } else {\r\n    console.log('SENDING BAD TOKEN PAGE');\r\n    return (\r\n      <>\r\n        <Paper className={classes.paperRoot}>\r\n          <Navbar />\r\n          <Paper className={classes.paperContent}>\r\n            <h1>INVALID TOKEN.</h1>\r\n          </Paper>\r\n        </Paper>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport 'whatwg-fetch'\r\nimport DuoWebSDK from 'duo_web_sdk';\r\nimport axios from 'axios';\r\nimport { Grid, Paper } from '@material-ui/core';\r\nimport Navbar from './Navbar';\r\n\r\nconst STATE_AUTH_PASSED = 'STATE_AUTH_PASSED';\r\nconst STATE_AUTH_FAILED = 'STATE_AUTH_FAILED';\r\nconst STATE_AUTH_PENDING = 'STATE_AUTH_PENDING';\r\n\r\nexport default function DuoLogin(props) {\r\n  const [duoAuthState, setAuthState] = useState(STATE_AUTH_PENDING);\r\n\r\n  useEffect(() => {\r\n    // Check and see if user has already logged in.\r\n    axios.get('/authorize')\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          props.history.push('/dashboard');\r\n        }\r\n      }).catch(err => {\r\n        // get the host and signed request from the server\r\n        // so we can initialize the Duo Prompt\r\n        axios.get('/duo_frame')\r\n          .then(res => res.data)\r\n          .then(initDuoFrame);\r\n      });\r\n    }, []);\r\n\r\n  const initDuoFrame = (json) => {\r\n    // initialize the frame with the parameters\r\n    // we have retrieved from the server\r\n    DuoWebSDK.init({\r\n      iframe: \"duo-frame\",\r\n      host: json.host,\r\n      sig_request: json.sigRequest,\r\n      submit_callback: submitPostAction\r\n    });\r\n  }\r\n\r\n  const submitPostAction = (form) => {\r\n    // Submit the signed response to our backend for verification.\r\n    const data = {signedResponse: form.sig_response.value};\r\n\r\n    axios.post('/duo_login', data)\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          setAuthState(STATE_AUTH_PASSED);\r\n          props.history.push('/dashboard');\r\n        } else {\r\n          setAuthState(STATE_AUTH_FAILED);\r\n        }\r\n      }).catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  let content;\r\n\r\n  switch (duoAuthState) {\r\n  case STATE_AUTH_PASSED:\r\n    content = <h3>Successfully passed Duo Authentication!</h3>\r\n    break;\r\n  case STATE_AUTH_FAILED: \r\n    content = <h3>Failed Duo Authentication.</h3>\r\n    break;\r\n  default:\r\n    content = <iframe width=\"1280\" height=\"720\" id=\"duo-frame\" />;\r\n    break;\r\n  }\r\n\r\n  return (\r\n        <div className=\"app\">\r\n          {content}\r\n        </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { Button, FormControl, TextField } from '@material-ui/core';\r\nimport gfm from 'remark-gfm';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function SyllabusViewer({ courseID }) {\r\n    const [mode, setMode] = useState(0); // 0 is viewing mode, 1 is editing mode.\r\n    const [role, setRole] = useState(0); // 0 is student, 1 is instructor or admin.\r\n    const [syllabus, setSyllabus] = useState('');\r\n    const [newSyllabus, setNewSyllabus] = useState('');\r\n    const inputRef = useRef();\r\n  \r\n    function toggleMode() {\r\n        setMode(prevMode => 1 - prevMode);\r\n        setNewSyllabus(syllabus);\r\n    }\r\n\r\n    function saveAndToggleMode() {\r\n        axios.put('/syllabus', { courseID, syllabus: newSyllabus })\r\n            .catch(console.log);\r\n        setSyllabus(newSyllabus);\r\n        toggleMode();\r\n    }\r\n\r\n    useEffect(() => {\r\n        setNewSyllabus(syllabus);\r\n    }, [syllabus]);\r\n\r\n    useEffect(() => {\r\n        if (courseID != -1) {\r\n            axios.get('/roles')\r\n            .then(res => {\r\n                if (res.data === 'admin') {\r\n                    setRole(1);\r\n                } else {\r\n                axios.get(`/roles/course/${courseID}`)\r\n                    .then(res => {\r\n                    if (res.data === 'instructor') {\r\n                        setRole(1);\r\n                    }\r\n                    });\r\n                }\r\n            });\r\n\r\n            axios.get(`/syllabus/${courseID}`)\r\n                .then(res => {\r\n                    setSyllabus(res.data);\r\n                })\r\n                .catch(console.log);\r\n        }\r\n    }, [courseID]);\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ display: 'flex', flexDirection: 'row-reverse' }}>\r\n                {role === 1 && mode === 0\r\n                ? <Button variant={'contained'} onClick={toggleMode}>Edit Syllabus</Button>\r\n                : <></>}\r\n                {role === 1 && mode === 1\r\n                ? <Button variant={'contained'} onClick={toggleMode}>Cancel</Button>\r\n                : <></>}\r\n                {role === 1 && mode === 1\r\n                ? <Button variant={'contained'} style={{ marginRight: '1em' }} onClick={saveAndToggleMode}>Save Changes</Button>\r\n                : <></>}\r\n            </div>\r\n            {mode === 0 ? <ReactMarkdown plugins={[gfm]} children={syllabus} /> : <></>}\r\n            {mode === 1 ? <FormControl style={{ width: '100%', marginTop: '1em' }}>\r\n                <TextField variant='outlined' value={newSyllabus} onChange={e => setNewSyllabus(e.target.value)} multiline={true} />\r\n            </FormControl> : <></>}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { List, ListItemText, Paper, ListItem, Typography } from '@material-ui/core';\r\nimport SyllabusViewer from './SyllabusViewer';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\nexport default function GeneralPanel(props) {\r\n  const classes = useStyles();\r\n  const courseData = props.courseData;\r\n  return (\r\n    <Paper className={classes.dialog} style={{ overflow: 'auto'}}>\r\n      <Typography variant=\"h5\">\r\n        Course Information\r\n      </Typography>\r\n      <Typography variant=\"h6\">\r\n        Term: {courseData.term}\r\n      </Typography>\r\n      <Typography variant=\"h6\">\r\n        Instructors\r\n        <List>\r\n          {\r\n            courseData.instructors.map(instructor => {              \r\n              return (\r\n                <ListItem>\r\n                  <ListItemText primary={instructor} />\r\n                </ListItem>\r\n              )\r\n            })\r\n          }\r\n        </List>\r\n      </Typography>\r\n      <SyllabusViewer courseID={courseData.course_id} />\r\n    </Paper>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Grid, TextField, List, ListItemText, Paper, ListItem, Typography } from '@material-ui/core';\r\nimport moment from 'moment';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\nfunction GetAnnouncementList(props) {\r\n  if (props.searchValue === '') {\r\n    return (\r\n      <List>\r\n        {props.announcementList.map(announcement => {\r\n            let date = moment(announcement.date_created).local();\r\n            date = date.format('MM-DD-YY [at] h:mm A');\r\n\r\n            return (\r\n              <ListItem>\r\n                <ListItemText primary={announcement.announcement_name} secondary={\r\n                  `${announcement.first_name} ${announcement.last_name} on ${date}`\r\n                } />\r\n              </ListItem>\r\n            );\r\n          })\r\n        }\r\n      </List>\r\n    );\r\n  }\r\n  else {\r\n    return (\r\n      <List>\r\n        {props.announcementList.map(announcement => {\r\n          let date = moment(announcement.date_created).local();\r\n          date = date.format('MM-DD-YY [at] h:mm A');\r\n          if (announcement.announcement_name.toLowerCase().includes(props.searchValue.toLowerCase()) ||\r\n                announcement.first_name.toLowerCase().includes(props.searchValue.toLowerCase()) ||\r\n                announcement.last_name.toLowerCase().includes(props.searchValue.toLowerCase()) ||\r\n                date.toLowerCase().includes(props.searchValue.toLowerCase())) {\r\n                  return (\r\n                    <ListItem>\r\n                      <ListItemText primary={announcement.announcement_name} secondary={\r\n                        `${announcement.first_name} ${announcement.last_name} on ${date}`\r\n                      } />\r\n                    </ListItem>\r\n                  );\r\n          }\r\n        })}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nexport default function AnnouncementPanel(props) {\r\n  const classes = useStyles();\r\n  const announcements = props.announcements;\r\n  var [searchValue, setSearchValue] = React.useState('');\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchValue(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.dialog}>\r\n      <Grid container justify=\"flex-end\">\r\n        <TextField label=\"Search\" variant=\"outlined\" color=\"secondary\" onChange={handleSearchChange} />\r\n      </Grid>\r\n      <Typography variant=\"h6\">\r\n        Announcements\r\n      </Typography>\r\n      <GetAnnouncementList announcementList={announcements} searchValue={searchValue} />\r\n    </Paper>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Button, Dialog, TextField, DialogActions, DialogContent, DialogTitle } from '@material-ui/core'\r\n\r\nexport default function FileUpload({open, setOpen, endpoint, data, ext}){\r\n  const [file, setFile] = useState(null);\r\n\r\n  const handleClose = () => {  \r\n    setOpen(false);\r\n  };\r\n\r\n  const submitFile = () => {\r\n    if (!file) {\r\n      alert('Select a file first!');\r\n      return;\r\n    } else if (ext && !ext.includes(file[0].name.split(\".\").slice(-1)[0])) {\r\n      alert('We do not support this file type.');\r\n      return;\r\n    }\r\n    const formData = new FormData();\r\n    formData.append('file', file[0]);\r\n\r\n    for (const key in data) {\r\n      formData.append(key, data[key]);\r\n    }\r\n\r\n    axios.post(endpoint, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    }).then(res => {\r\n      if (res.status === 201) {\r\n        alert('File uploaded successfully!');\r\n      } \r\n      setOpen(false);\r\n    }).catch(err => {\r\n      alert('There was an issue with uploading the file.');\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n        open = {open}\r\n        onClose = {handleClose}\r\n        aria-labelled-by=\"approve-dialog-title\"\r\n        aria-described-by=\"approve-dialog-filename\" //will be filled by actual filename variable\r\n    >\r\n        <DialogTitle id=\"approve-dialog-title\">{\"Upload File\"}</DialogTitle>\r\n        <DialogContent>\r\n        <TextField\r\n          name=\"upload-file\"\r\n          type=\"file\"\r\n          onChange={event => setFile(event.target.files)}\r\n        />\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button onClick={submitFile} color=\"primary\">\r\n                Upload\r\n            </Button>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n                Cancel\r\n            </Button>\r\n        </DialogActions>\r\n    </Dialog>\r\n  );\r\n\r\n // return (\r\n //   <form onSubmit={submitFile}>\r\n //     <label>Upload file</label>\r\n //     <input type=\"file\" onChange={event => setFile(event.target.files)} />\r\n //     <button type=\"submit\">Send</button>\r\n //   </form>\r\n // );\r\n}","import React from 'react';\r\nimport { TextField, Button, Box, Tabs, Tab, Dialog, AppBar, Toolbar, IconButton, Typography, Grid, Drawer, Divider  } from '@material-ui/core';\r\nimport FileUpload from './../FileUpload';\r\n\r\nexport default function FileUploadTab(props) {\r\n  const classes = props.classes;\r\n  const [open, setOpen] = React.useState(false);\r\n  const [uploadOpen, setUploadOpen] = React.useState(false);\r\n  const [selectedFile, setSelectedFile] = React.useState(null);\r\n\r\n  function uploadClicked(){\r\n    console.log(props);\r\n    setUploadOpen(true);\r\n  }\r\n\r\n  const onFileSubmit = (event) => {\r\n    alert('file');\r\n  };\r\n\r\n  let courseID = 1;\r\n\r\n  return(\r\n    <Box height={200}>\r\n      <Grid container height=\"100%\" spacing={1}>\r\n        <Grid item xs={12}>\r\n          <Button className={classes.panelItems} onClick={uploadClicked} color=\"primary\" variant=\"contained\">Upload</Button>\r\n          <FileUpload open={uploadOpen} setOpen={setUploadOpen} courseID={courseID} endpoint='/submissions' data={props.data}/>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Button className={classes.panelItems} variant=\"contained\" color=\"secondary\" onClick={onFileSubmit}>\r\n            Submit\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}","import React from 'react';\r\nimport { TextField, Button, Box, Typography, Grid } from '@material-ui/core';\r\n\r\nexport default function FileUploadTab(props) {\r\n  const classes = props.classes;\r\n  const [value, setValue] = React.useState(\"\");\r\n\r\n  const handleChange = e => {\r\n    setValue(e.target.value);\r\n  }\r\n\r\n  const onSubmit = e => {\r\n    alert(value);\r\n  };\r\n\r\n  return(\r\n    <Box height={200}>\r\n      <Grid container height=\"100%\" spacing={1}>\r\n        <Grid item xs={12}>\r\n          <TextField\r\n            fullWidth\r\n            className={classes.panelItems}\r\n            id=\"outlined-multiline-static\"\r\n            label=\"Multiline\"\r\n            multiline\r\n            rows={3}\r\n            variant=\"outlined\"\r\n            value={value}\r\n            onChange={handleChange}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Button className={classes.panelItems} variant=\"contained\" color=\"secondary\" onClick={onSubmit}>\r\n            Submit\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport { TextField, Button, Box, Typography, Grid } from '@material-ui/core';\r\n\r\nexport default function LinkUploadTab(props) {\r\n  const classes = props.classes;\r\n  const [value, setValue] = React.useState(\"\");\r\n\r\n  const handleChange = e => {\r\n    setValue(e.target.value);\r\n  }\r\n\r\n  const onSubmit = e => {\r\n    alert(value);\r\n  };\r\n\r\n  return(\r\n    <Box height={200}>\r\n      <Grid container height=\"100%\" spacing={1}>\r\n        <Grid item xs={12}>\r\n          <TextField \r\n            value={value}\r\n            onChange={handleChange}\r\n            id=\"outlined-basic\" \r\n            label=\"Link\" \r\n            variant=\"outlined\" \r\n            className={classes.panelItems}/>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Button variant=\"contained\" color=\"secondary\" className={classes.panelItems} onClick={onSubmit}>\r\n            Submit\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport { Box, Typography, Grid } from '@material-ui/core';\r\n\r\nexport default function SubmissionTab(props) {\r\n  const classes = props.classes;\r\n\r\n  return(\r\n    <Box height={200}>\r\n      <Grid container height=\"100%\" spacing={1}>\r\n        <Grid item xs={12}>\r\n          <Typography className={classes.panelItems}>Submission</Typography>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Typography className={classes.panelItems}>Uploaded files or text submission</Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport { Box, Typography, Grid } from '@material-ui/core';\r\n\r\nexport default function CommentsTab(props) {\r\n  const classes = props.classes;\r\n\r\n  return(\r\n    <Box height={200}>\r\n      <Grid container height=\"100%\" spacing={1}>\r\n        <Grid item xs={12}>\r\n          <Typography className={classes.panelItems}>Comments</Typography>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Typography className={classes.panelItems}>Comments from professor on grade here.</Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\n","import React, { useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport { Box, Typography, Grid } from '@material-ui/core';\r\n\r\nexport default function GradeTab(props) {\r\n  const classes = props.classes;\r\n  const [grade, setGrade] = useState('Default');\r\n  useEffect(() => {\r\n    console.log(props.data.assignmentID);\r\n    axios.get(`/grades/${props.data.assignmentID}/`)\r\n    .then(res => { checkGrade(res.data);\r\n      //setGrade(res.data.grade)\r\n    }).catch(console.log)  //String(res.data.grade)\r\n    console.log(grade);\r\n  })\r\n\r\n  const checkGrade = (gradeList) => {\r\n    console.log(gradeList);\r\n    if(gradeList.length == 0){\r\n      setGrade('Instructor is working on grades still...');\r\n    }\r\n    else{\r\n      setGrade(String(gradeList[0].grade) + \" %\");\r\n    }\r\n  }\r\n\r\n  return(\r\n    <Box height={200}>\r\n      <Grid container height=\"100%\" spacing={1}>\r\n        <Grid item xs={12}>\r\n          <Typography className={classes.panelItems}>Grade</Typography>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Typography variant=\"h2\" className={classes.panelItems}>{grade}</Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Tabs, Tab, Dialog, AppBar, Toolbar, IconButton, Typography, Grid, Drawer, Divider  } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FileUploadTab from './StudentAssignmentTabs/FileUploadTab';\r\nimport TextUploadTab from './StudentAssignmentTabs/TextUploadTab';\r\nimport LinkUploadTab from './StudentAssignmentTabs/LinkUploadTab';\r\nimport SubmissionTab from './StudentAssignmentTabs/SubmissionTab';\r\nimport CommentsTab from './StudentAssignmentTabs/CommentsTab';\r\nimport GradeTab from './StudentAssignmentTabs/GradeTab';\r\nimport axios from 'axios';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(1),\r\n    height: \"100vh\",\r\n  },\r\n  items: {\r\n    margin: theme.spacing(5),\r\n  },\r\n  panelItems: {\r\n    margin: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nfunction IsSubmitted({submitted, classes, assignmentID}) {\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  if (submitted) {\r\n    return(\r\n      <Drawer\r\n        className={classes.drawer}\r\n        variant=\"permanent\"\r\n        anchor=\"bottom\">\r\n          <AppBar position=\"static\">\r\n            <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\r\n              <Tab label=\"Submission\" {...a11yProps(0)} />\r\n              <Tab label=\"Comments\" {...a11yProps(1)} />\r\n              <Tab label=\"Grade\" {...a11yProps(2)} />\r\n            </Tabs>\r\n          </AppBar>\r\n          <TabPanel value={value} index={0}>\r\n            <SubmissionTab classes={classes} data={{assignmentID}} />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <CommentsTab classes={classes} data={{assignmentID}} />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={2}>\r\n            <GradeTab classes={classes} data={{assignmentID}} />\r\n          </TabPanel>\r\n      </Drawer>\r\n    );\r\n  }\r\n  else {\r\n    return(\r\n      <Drawer \r\n        className={classes.drawer}\r\n        variant=\"permanent\"\r\n        anchor=\"bottom\">\r\n          <AppBar position=\"static\">\r\n            <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\r\n              <Tab label=\"File Upload\" {...a11yProps(0)} />\r\n              <Tab label=\"Text Submission\" {...a11yProps(1)} />\r\n              <Tab label=\"Link Submission\" {...a11yProps(2)} />\r\n            </Tabs>\r\n          </AppBar>\r\n          <TabPanel value={value} index={0}>\r\n            <FileUploadTab classes={classes} data={{assignmentID}}/>\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <TextUploadTab classes={classes} data={{assignmentID}}/>\r\n          </TabPanel>\r\n          <TabPanel value={value} index={2}>\r\n            <LinkUploadTab classes={classes} data={{assignmentID}}/>\r\n          </TabPanel>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default function StudentAssignment({selectedAssignment, open, setOpen}) {\r\n  const classes = useStyles();\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [submissions, setSubmissions] = useState([]);\r\n  const [grade, setGrade] = useState('');\r\n  const [files, setFiles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    axios.get(`/submissions/assignment/${selectedAssignment.assignment_id}`)\r\n      .then(res => {\r\n        if (res.data.length > 0) {\r\n          setSubmitted(true);\r\n        } else {\r\n          setSubmitted(false);\r\n        }\r\n        setSubmissions(res.data);\r\n      }).catch(console.log);\r\n\r\n    axios.get(`/grades/${selectedAssignment.assignment_id}`)\r\n      .then(res => setGrade(res.data.grade)).catch(console.log);\r\n\r\n    axios.get(`/assignment_files/approved/${selectedAssignment.assignment_id}`)\r\n      .then(res => setFiles(res.data)).catch(console.log);\r\n    }, [selectedAssignment]);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog fullScreen open={open} onClose={handleClose}>\r\n    <AppBar className={classes.appBar}>\r\n      <Toolbar className={classes.toolbar}>\r\n        <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n        <Typography variant=\"h6\" className={classes.title}>\r\n          {selectedAssignment.assignment_name}\r\n        </Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n    <Grid container height=\"100%\" spacing={1}>\r\n      <Grid item xs={12}>\r\n        <Typography className={classes.items}>{selectedAssignment.assignment_description}</Typography>\r\n        <Divider />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Typography className={classes.items}>\r\n          {submissions.map(s => \r\n            <a href={s.url} target=\"_blank\">\r\n              <Typography className={classes.items}>\r\n                {s.file_name}\r\n              </Typography>\r\n            </a>\r\n          )}\r\n        </Typography>\r\n        <Divider />\r\n      </Grid>\r\n    </Grid>\r\n    <IsSubmitted submitted={submitted} classes={classes} assignmentID={selectedAssignment.assignment_id} />\r\n  </Dialog>\r\n  );\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, AppBar, Toolbar, IconButton, Typography, List, ListItem, ListItemText, ListItemSecondaryAction, TextField, DialogContentText, Button, Grid, DialogTitle, DialogContent, DialogActions } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\nconst useInnerStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n    margin: theme.spacing(1, 2)\r\n  },\r\n}));\r\n\r\nexport default function InstructorAssignment({selectedAssignment, open, setOpen, courseID}) {\r\n  const classes = useStyles();\r\n  const innerClasses = useInnerStyles();\r\n  const [students, setStudents] = useState([]);\r\n  const [averageGrade, setAverageGrade] = useState('');\r\n  const studentsRef = useRef([]);\r\n  const gradesRef = useRef([]);\r\n  const submissionsRef = useRef([]);\r\n  const [selectedStudent, setSelectedStudent] = useState({id: -1, first_name: '', last_name: ''});\r\n  const [gOpen, setGopen] = React.useState(false);\r\n  const [submissionsPerStudent, setSubmissionsPerStudent] = useState([]);\r\n\r\n  useEffect(() => {\r\n    //get request to retrieve all users who are students of this class\r\n    axios.get(`/courses/${courseID}/students`)\r\n      .then(res => {\r\n        addStudentsToList(res);\r\n      })\r\n      .catch(console.log);\r\n\r\n    //get request to retrieve all grades for this assignment\r\n\r\n    axios.get(`/assignment/grades/${selectedAssignment.assignment_id}`)\r\n    .then(res => {\r\n      if(res.data.length == 0){\r\n        setAverageGrade('Class Average: Not Availaible');        \r\n      }\r\n      else{\r\n        gradesRef.current = res.data;\r\n        let totalGrade = 0;\r\n        var x;\r\n        for(x of gradesRef.current){\r\n          totalGrade = totalGrade + x.grade;\r\n        }\r\n        setAverageGrade('Class Average: ' + String(totalGrade / gradesRef.current.length) + ' %');\r\n      }\r\n    })\r\n    .catch(console.log);\r\n\r\n    \r\n  }, [gOpen, selectedAssignment]); //[open, gOpen, students, selectedStudent, selectedAssignment]\r\n\r\n  function addSubmissionsToList(res){\r\n    submissionsRef.current = res.data;\r\n    setSubmissionsPerStudent(submissionsRef.current);\r\n    console.log(submissionsRef.current);\r\n  }\r\n\r\n\r\n  function addStudentsToList(res){\r\n    studentsRef.current = res.data;\r\n    setStudents(studentsRef.current);\r\n  }\r\n\r\n  const studentClicked = (student) => () =>{\r\n    console.log(student);\r\n    if(selectedStudent.id === -1){\r\n      axios.get(`/submissions/assignment/${selectedAssignment.assignment_id}/student/${student.id}`)\r\n      .then(res => {addSubmissionsToList(res)}).catch(console.log);\r\n      //setSubmissionsPerStudent([{file_name: 'file1', url: 'file1'}, {file_name: 'file2', url: 'file2'}]);\r\n      setSelectedStudent(student);\r\n    }\r\n    else if(selectedStudent.id !== -1){\r\n      if(student.id === selectedStudent.id){\r\n        setSubmissionsPerStudent([]);\r\n        submissionsRef.current = [];\r\n        setSelectedStudent({id: -1, first_name: '', last_name: ''});\r\n      }\r\n      else if (selectedStudent.id !== student.id){\r\n        axios.get(`/submissions/assignment/${selectedAssignment.assignment_id}/student/${student.id}`)\r\n        .then(res => {addSubmissionsToList(res)}).catch(console.log);\r\n        //setSubmissionsPerStudent([{file_name: 'file1', url: 'file1'}, {file_name: 'file2', url: 'file2'}]);\r\n        setSelectedStudent(student);\r\n      }\r\n    } \r\n  }\r\n\r\n  const gradeClicked = (student) => () => {\r\n    console.log(student);\r\n    setSelectedStudent(student);\r\n    if(student.id != selectedStudent.id){\r\n      submissionsRef.current = [];\r\n      setSubmissionsPerStudent(submissionsRef.current);\r\n    }\r\n    setGopen(true);\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog fullScreen open={open} onClose={handleClose}>\r\n    <AppBar className={classes.appBar}>\r\n      <Toolbar className={classes.toolbar}>\r\n        <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n        <Typography variant=\"h6\" className={classes.title}>\r\n          {selectedAssignment.assignment_name}\r\n        </Typography>\r\n        <Typography variant=\"h6\" className={classes.menuButton}>\r\n          {averageGrade}\r\n        </Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n    <List>\r\n        {\r\n          students.map((student) => {\r\n            var name = student.first_name + \" \" + student.last_name;\r\n            var id = String(student.id);\r\n\r\n                    return (<>\r\n                        <ListItem className={classes.items} divider={true} button={true} onClick={studentClicked(student)}>\r\n                            <ListItemText primary={name} secondary={\"ID: \" + id + \", Click to see Submissions\"} />\r\n                            <ListItemSecondaryAction>\r\n\r\n                                  <Button size=\"small\" className={classes.items} onClick={gradeClicked(student)} variant=\"contained\" color=\"secondary\">\r\n                                    Grade Assignment\r\n                                  </Button>\r\n                                \r\n                              \r\n                            </ListItemSecondaryAction>\r\n                        </ListItem>\r\n                        <List divider={true} className={innerClasses}>\r\n                          {\r\n                            submissionsPerStudent.map((submission) => {\r\n                            if(selectedStudent.id == student.id){\r\n                              let date = moment(submission.time_submitted).local();\r\n                              let dateString = date.format('[Time Submitted:] MM-DD-YY [at] h:mm A');\r\n                            return(<>\r\n                              <ListItem divider={true}>\r\n                                <ListItemText primary={\r\n                                  <a href={submission.url} target=\"_blank\">\r\n                                    <Typography color='secondary'>{submission.file_name}</Typography>\r\n                                  </a>}\r\n                                  secondary={dateString}\r\n                                  ></ListItemText>\r\n                              </ListItem>\r\n                            </>);\r\n                            }\r\n                            })\r\n                          } \r\n                        </List>\r\n                    </>);\r\n                })\r\n            }\r\n        </List>\r\n        <GradingDialog selectedStudent={selectedStudent} selectedAssignment={selectedAssignment} open={gOpen} setOpen={setGopen}/>\r\n  </Dialog>\r\n  );\r\n}\r\n\r\nfunction GradingDialog({selectedStudent, selectedAssignment, open, setOpen}){\r\n  const [newGrade, setNewGrade] = useState('');\r\n  const [studentName, setStudentName] = useState('');\r\n  const [oldGrade, setOldGrade] = useState('');\r\n  useEffect (() => {\r\n    if(selectedStudent.id !== -1){\r\n      setStudentName(selectedStudent.first_name + \" \" + selectedStudent.last_name);\r\n\r\n      axios.get(`/grades/${selectedAssignment.assignment_id}/${selectedStudent.id}`)\r\n      .then(res => {\r\n        console.log(res.data);\r\n        if(res.data.length == 0){\r\n          setOldGrade(\"Assignment currently ungraded.\");\r\n        }\r\n        else{\r\n          setOldGrade(String(res.data[0].grade) + \" %\");\r\n        }\r\n      }).catch(console.log)\r\n    }\r\n\r\n    \r\n  }, [selectedStudent])\r\n/*\r\n  const checkGrade = (gradeList) => {\r\n    console.log(gradeList.data);\r\n    if(gradeList.data.length == 0){\r\n      setOldGrade(\"Assignment currently ungraded.\");\r\n    }\r\n    else{\r\n      setOldGrade(String(gradeList.data[0].grade) + \" %\");\r\n    }\r\n  }\r\n*/\r\nconst handleClose = () => {\r\n  setNewGrade('');\r\n  setOldGrade('');  \r\n  setOpen(false);\r\n};\r\n\r\nconst handleGradeChange = e => {\r\n  setNewGrade(e.target.value);\r\n}\r\n\r\nconst setGradeClicked = (student) => () =>{\r\n  var gradeString = newGrade.split('/');\r\n  var givenPoints = parseFloat(gradeString[0]);\r\n  var maxPoints = parseFloat(gradeString[1]);\r\n  var grade = (givenPoints / maxPoints) * 100.0;\r\n  console.log(grade);\r\n  if(oldGrade === \"Assignment currently ungraded.\"){\r\n    axios.post(`/grades/`, {\r\n      userID: student.id,\r\n      assignmentID: selectedAssignment.assignment_id,\r\n      grade: grade\r\n    }).then(res =>{\r\n      if(res.status === 400){\r\n        alert(res.statusText);\r\n      }\r\n      alert('Grade Submitted');\r\n      setNewGrade('');\r\n      setOpen(false);\r\n  })\r\n  }\r\n  else{\r\n    axios.put(`/grades/`, {\r\n      userID: student.id,\r\n      assignmentID: selectedAssignment.assignment_id,\r\n      grade: grade\r\n    }).then(res =>{\r\n      if(res.status === 400){\r\n        alert(res.statusText);\r\n      }\r\n      alert('Grade Updated');\r\n      setNewGrade('');\r\n      setOpen(false);\r\n  })\r\n  }\r\n}\r\n\r\n\r\nreturn (\r\n  <Dialog\r\n      open = {open}\r\n      onClose = {handleClose}\r\n      aria-labelledby=\"grade-dialog-title\"\r\n      aria-describedby=\"grade-dialog-assignment\"\r\n  >\r\n      <DialogTitle id=\"grade-dialog-title\">{studentName}</DialogTitle>\r\n      <DialogContent>\r\n          <DialogContentText id=\"grade-dialog-assignment\">\r\n              {oldGrade} \r\n          </DialogContentText>\r\n          <TextField size=\"small\" color=\"secondary\" multiline=\"true\" variant=\"standard\" helperText=\"Given Points/Max Possible\" label=\"Change Grade\" value={newGrade} name=\"changegrade\" onChange={handleGradeChange} />\r\n      </DialogContent>\r\n      <DialogActions>\r\n          <Button onClick={setGradeClicked(selectedStudent)} color=\"primary\">\r\n              Submit Grade\r\n          </Button>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n              Cancel\r\n          </Button>\r\n      </DialogActions>\r\n  </Dialog>\r\n);\r\n}","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Grid, TextField, List, ListItemText, Paper, ListItem, Typography } from '@material-ui/core';\r\nimport moment from 'moment';\r\nimport StudentAssignment from './StudentAssignment';\r\nimport InstructorAssignment from './InstructorAssignment';\r\nimport axios from 'axios';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\nfunction GetAssignmentList(props) {\r\n  if (props.searchValue === '') {\r\n    return (\r\n      <List>\r\n        {props.assignmentList.map(assignment => {\r\n        let date = moment(assignment.deadline).local();\r\n        date = date.format('[Due on] MM-DD-YY [at] h:mm A');\r\n        \r\n        return (\r\n          <ListItem button onClick={() => {\r\n            props.setSelectedAssignment(assignment);\r\n            console.log(props.role);\r\n            console.log(props.selectedAssignment);\r\n            //Check for role before opening\r\n            if(props.role == 0){\r\n              props.setSopen(true);\r\n            }\r\n            else if(props.role == 1){\r\n              props.setIopen(true);\r\n            }\r\n          }}>\r\n            <ListItemText primary={assignment.assignment_name} secondary={date} />\r\n          </ListItem>\r\n        );\r\n      })\r\n      }\r\n    </List>\r\n    );\r\n  }\r\n  else {\r\n    return (\r\n      <List>\r\n        {props.assignmentList.map(assignment => {\r\n          let date = moment(assignment.deadline).local();\r\n          date = date.format('[Due on] MM-DD-YY [at] h:mm A');\r\n          if (assignment.assignment_name.toLowerCase().includes(props.searchValue.toLowerCase()) || \r\n                date.toLowerCase().includes(props.searchValue.toLowerCase())) {\r\n            return (\r\n              <ListItem button onClick={() => {\r\n                props.setSelectedAssignment(assignment);\r\n                //Check for role before opening\r\n                if(props.role == 0){\r\n                  props.setSopen(true);\r\n                }\r\n                else if(props.role == 1){\r\n                  props.setIopen(true);\r\n                }\r\n              }}>\r\n                <ListItemText primary={assignment.assignment_name} secondary={date} />\r\n              </ListItem>\r\n            );\r\n          }\r\n        })}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nexport default function AssignmentPanel(props) {\r\n  const classes = useStyles();\r\n  const assignments = props.assignments;\r\n  const [sopen, setSopen] = React.useState(false);\r\n  const [iopen, setIopen] = React.useState(false);\r\n  const [selectedAssignment, setSelectedAssignment] = React.useState({ assignment_name: '', assignment_id: -1, deadline: '', assignment_description: '' });\r\n  const [role, setRole] = React.useState(0);\r\n  var [searchValue, setSearchValue] = React.useState('');\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchValue(event.target.value);\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        if (res.data === 'admin') {\r\n          setRole(1);\r\n        } else {\r\n          axios.get(`/roles/course/${props.courseID}`)\r\n            .then(res => {\r\n              if (res.data === 'instructor') {\r\n                setRole(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Paper className={classes.dialog}>\r\n        <Grid container justify=\"flex-end\">\r\n          <TextField label=\"Search\" variant=\"outlined\" color=\"secondary\" onChange={handleSearchChange} />\r\n        </Grid>\r\n        <Typography variant=\"h6\">\r\n          Assignments\r\n        </Typography>\r\n        <GetAssignmentList assignmentList={assignments} searchValue={searchValue} iopen={iopen} sopen={sopen} setSopen={setSopen} setIopen={setIopen} selectedAssignment={selectedAssignment} setSelectedAssignment={setSelectedAssignment} role={role} />\r\n      </Paper>\r\n      <StudentAssignment selectedAssignment={selectedAssignment} open={sopen} setOpen={setSopen} courseID={props.courseID} />\r\n      <InstructorAssignment selectedAssignment={selectedAssignment} open={iopen} setOpen={setIopen} courseID={props.courseID}/>\r\n    </>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Grid, List, ListItem, Paper, Typography, Button, TextField } from '@material-ui/core';\r\nimport FileUpload from \"./FileUpload\";\r\nimport axios from 'axios';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\nfunction GetFileList(props) {\r\n  if (props.searchValue === '') {\r\n    return (\r\n      <List>\r\n        {props.fileList.map((file) => (\r\n          <a href={file.url} target=\"_blank\">\r\n          <ListItem button key={file.file_name}>\r\n            <Typography color='secondary'>{file.file_name}</Typography>\r\n          </ListItem>\r\n          </a>\r\n        ))}\r\n      </List>\r\n    );\r\n  }\r\n  else {\r\n    return (\r\n      <List>\r\n        {props.fileList.map((file) => {\r\n          if (file.file_name.toLowerCase().includes(props.searchValue.toLowerCase())) {\r\n            return (\r\n              <a href={file.url} target=\"_blank\">\r\n              <ListItem button key={file.file_name}>\r\n                <Typography color='secondary'>{file.file_name}</Typography>\r\n              </ListItem>\r\n              </a>\r\n            );\r\n          }\r\n        })}\r\n      </List>\r\n    )\r\n  }\r\n}\r\n\r\nexport default function FilePanel({courseID}) {\r\n  const classes = useStyles();\r\n  const setOpen = React.useState(false);\r\n  const [uploadOpen, setUploadOpen] = React.useState(false);\r\n  const setSelectedFile = React.useState(null);\r\n  var [fileList, setFileList] = React.useState([]);\r\n  var [searchValue, setSearchValue] = React.useState('');\r\n  const [role, setRole] = React.useState(0);\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchValue(event.target.value);\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios.get(`/course_files/approved/${courseID}`)\r\n      .then(res => {\r\n        console.log(res.data);\r\n        setFileList(res.data)\r\n      })\r\n      .catch(console.log);\r\n\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        if (res.data === 'admin') {\r\n          setRole(1);\r\n        } else {\r\n          axios.get(`/roles/course/${courseID}`)\r\n            .then(res => {\r\n              if (res.data === 'instructor') {\r\n                setRole(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  function uploadClicked(){\r\n    setUploadOpen(true);\r\n  }\r\n\r\n  if (role == 0) {\r\n    return (\r\n      <>\r\n      <Paper className={classes.dialog}>\r\n        <Grid container justify=\"flex-end\">\r\n          <TextField label=\"Search\" variant=\"outlined\" color=\"secondary\" onChange={handleSearchChange} />\r\n        </Grid>\r\n        <Typography variant=\"h6\">\r\n          Files\r\n        </Typography>\r\n        <GetFileList fileList={fileList} searchValue={searchValue} setOpen={setOpen} setSelectedFile={setSelectedFile} />\r\n      </Paper>\r\n    </>\r\n    );\r\n  }\r\n  else if (role == 1) {\r\n    return (\r\n      <>\r\n      <Paper className={classes.dialog}>\r\n        <Grid container justify=\"flex-end\">\r\n          <TextField label=\"Search\" variant=\"outlined\" color=\"secondary\" onChange={handleSearchChange} />\r\n        </Grid>\r\n        <Typography variant=\"h6\">\r\n          Files\r\n        </Typography>\r\n        <GetFileList fileList={fileList} searchValue={searchValue} setOpen={setOpen} setSelectedFile={setSelectedFile} />\r\n        <Button onClick={uploadClicked} color=\"primary\" variant=\"contained\">Upload</Button>\r\n      </Paper>\r\n      <FileUpload open={uploadOpen} setOpen={setUploadOpen} endpoint='/course_files' data={{courseID}} />\r\n    </>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper } from '@material-ui/core';\r\nimport ReactPlayer from 'react-player';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    margin: 0,\r\n    padding: theme.spacing(2),\r\n  },\r\n  paper: {\r\n    backgroundColor: \"transparent\",\r\n    boxShadow: \"none\",\r\n    overflow: \"hidden\"\r\n  },\r\n}));\r\n\r\nexport default function VideoPlayer(props) {\r\n  const classes = useStyles();\r\n\r\n  return(\r\n    <>\r\n      <div>\r\n        <ReactPlayer \r\n          controls={true}\r\n          url={props.videoFile ? props.videoFile.url : ''}\r\n          width=\"580px\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { List, ListItem, Paper, Typography, Button } from '@material-ui/core';\r\nimport VideoPlayer from './VideoPlayer';\r\nimport FileUpload from './FileUpload';\r\nimport axios from 'axios';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\n\r\nexport default function LecturePanel({courseID}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [uploadOpen, setUploadOpen] = React.useState(false);\r\n  const [selectedLecture, setSelectedLecture] = React.useState(null);\r\n  const [lectureList, setLectureList] = React.useState([]);\r\n  const [role, setRole] = React.useState(0);\r\n\r\n  useEffect(() => {\r\n    axios.get(`/course_videos/approved/${courseID}`)\r\n      .then(res => {\r\n        setLectureList(res.data)\r\n      })\r\n      .catch(console.log);\r\n\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        if (res.data === 'admin') {\r\n          setRole(1);\r\n        } else {\r\n          axios.get(`/roles/course/${courseID}`)\r\n            .then(res => {\r\n              if (res.data === 'instructor') {\r\n                setRole(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  function uploadClicked(){\r\n    setUploadOpen(true);\r\n  }\r\n\r\n  if(role == 0){\r\n\r\n    return (\r\n      <>\r\n      <Paper className={classes.dialog}>\r\n        <Typography variant=\"h6\">\r\n          Lectures\r\n        </Typography>\r\n        <List>\r\n        {lectureList.map((file) => (\r\n          <ListItem button key={file.file_name} onClick={() => {\r\n            setOpen(true);\r\n            setSelectedLecture(file);\r\n          }}>\r\n            <Typography color='secondary'>{file.file_name}</Typography>\r\n          </ListItem>\r\n        ))}\r\n        </List>\r\n      </Paper>\r\n      <VideoPlayer open={open} setOpen={setOpen} videoFile={selectedLecture}/>\r\n    </>\r\n    );\r\n\r\n  }\r\n  else if(role == 1){\r\n\r\n    return (\r\n      <>\r\n      <Paper className={classes.dialog}>\r\n        <Typography variant=\"h6\">\r\n          Lectures\r\n        </Typography>\r\n        <List>\r\n        {lectureList.map((file) => (\r\n          <>\r\n          <ListItem button key={file.file_name} onClick={() => {\r\n            if (selectedLecture && selectedLecture.file_name == file.file_name) {\r\n              setOpen(false);\r\n              setSelectedLecture(null);\r\n            } else {\r\n              setOpen(true);\r\n              setSelectedLecture(file);\r\n            }\r\n          }}>\r\n            <Typography color='secondary'>{file.file_name}</Typography>\r\n          </ListItem>\r\n          {selectedLecture && selectedLecture.file_name==file.file_name && open && <VideoPlayer videoFile={selectedLecture} />}\r\n          </>\r\n        ))}\r\n        </List>\r\n        <Button onClick={uploadClicked} color=\"primary\" variant=\"contained\">Upload</Button>\r\n      </Paper>\r\n      <FileUpload open={uploadOpen} setOpen={setUploadOpen} endpoint='/course_videos' data={{courseID}} ext={['mp4', 'mkv']}/>\r\n    </>\r\n    );\r\n\r\n  }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Tabs, Tab, IconButton, Typography, Dialog, AppBar, Toolbar } from '@material-ui/core';\r\nimport HomePanel from './ClassViews/HomePanel';\r\nimport AnnouncementPanel from './ClassViews/AnnouncementPanel';\r\nimport AssignmentPanel from './ClassViews/AssignmentPanel';\r\nimport FilePanel from './ClassViews/FilePanel';\r\nimport LecturePanel from './ClassViews/LecturePanel';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport axios from 'axios';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ClassDialog({ selectedClass, open, setOpen }) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n  const [courseData, setCourseData] = React.useState({instructors: [], course_id: -1});\r\n  const [announcements, setAnnouncements] = useState([]);\r\n  const [assignments, setAssignments] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (selectedClass.id != null) {\r\n      axios.get(`/courses/${selectedClass.id}`)\r\n        .then(res => {\r\n          setCourseData(res.data);\r\n        })\r\n        .catch(console.log);\r\n\r\n      axios.get(`/courses/${selectedClass.id}/announcements`)\r\n        .then(res => {\r\n          setAnnouncements(res.data);\r\n        })\r\n        .catch(console.log);\r\n\r\n      axios.get(`/courses/${selectedClass.id}/assignments`)\r\n        .then(res => {\r\n          setAssignments(res.data);\r\n        })\r\n        .catch(console.log);\r\n    }\r\n  }, [selectedClass.id]);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog fullScreen open={open} onClose={handleClose}>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar className={classes.toolbar}>\r\n          <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\"s>\r\n            {selectedClass.name}\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <AppBar position=\"static\">\r\n        <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\r\n          <Tab label=\"Class Information\" {...a11yProps(0)} />\r\n          <Tab label=\"Assignments\" {...a11yProps(1)} />\r\n          <Tab label=\"Announcements\" {...a11yProps(2)} />\r\n          <Tab label=\"Files\" {...a11yProps(3)} />\r\n          <Tab label=\"Lectures\" {...a11yProps(4)} />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        <HomePanel courseData={courseData} />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <AssignmentPanel assignments={assignments} courseID={selectedClass.id} />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <AnnouncementPanel announcements={announcements} />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <FilePanel courseID={selectedClass.id}/>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <LecturePanel courseID={selectedClass.id}/>\r\n      </TabPanel>\r\n    </Dialog>\r\n  );\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Tabs, Tab, List, ListItemText, Paper, IconButton, Drawer, Divider, ListItem, Typography, Dialog, AppBar, Toolbar } from '@material-ui/core';\r\nimport axios from 'axios';\r\nimport ClassDialog from './ClassDialog'\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n}));\r\n\r\nexport default function CurrentDrawer(props) {\r\n  const [selectedClass, setSelectedClass] = React.useState({ name: undefined, id: undefined });\r\n  const [open, setOpen] = React.useState(false);\r\n  const classes = useStyles();\r\n  const courses = props.courses;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Drawer\r\n        className={classes.drawer}\r\n        variant=\"permanent\"\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n        anchor=\"left\"\r\n      >\r\n        <div className={classes.toolbar} />\r\n        <Divider />\r\n        <List>\r\n          {courses.map((course) => (\r\n            <ListItem button key={course.course_name} onClick={() => {\r\n              setOpen(true);\r\n              setSelectedClass({ name: course.course_name, id: course.course_id });\r\n            }}>\r\n              <Typography color='primary'><span class=\"underline-on-hover\">{course.course_name}</span></Typography>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Drawer>\r\n      <ClassDialog selectedClass={selectedClass} open={open} setOpen={setOpen} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport io from 'socket.io-client'\r\n\r\nconst SocketContext = React.createContext()\r\n\r\nexport function useSocket() {\r\n  return useContext(SocketContext)\r\n}\r\n\r\nexport function SocketProvider({ id, children }) {\r\n  const [socket, setSocket] = useState()\r\n\r\n  useEffect(() => {\r\n    let url = `${window.location.hostname}`;\r\n    if (url.startsWith('localhost')) {\r\n      url += ':5000';\r\n      url = `http://${url}`;\r\n    } else {\r\n      url = `https://${url}`;\r\n    }\r\n    console.log(url);\r\n    const newSocket = io(\r\n      url,\r\n      { query: { id } }\r\n    )\r\n    setSocket(newSocket)\r\n\r\n    return () => newSocket.close()\r\n  }, [id])\r\n\r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  )\r\n}\r\n","import React, { useContext, useState, useEffect, useCallback } from 'react';\r\nimport { useSocket } from './SocketProvider';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\nconst ConversationsContext = React.createContext();\r\n\r\nexport function useConversations() {\r\n    return useContext(ConversationsContext);\r\n}\r\n\r\nexport default function ConversationsProvider({ user, courseID, children }) {\r\n    const [conversations, setConversations] = useState([]);\r\n    const [selectedConversationIndex, setSelectedConversationIndex] = useState(0);\r\n    const [refresh, setRefresh] = useState(0);\r\n    const socket = useSocket();\r\n\r\n    useEffect(() => {\r\n        async function getConversations() {\r\n            if (courseID != -1) {\r\n                try {\r\n                    let res = await axios.get(`/chat/conversations/${courseID}`)\r\n                    let c = res.data;\r\n\r\n                    res = await axios.get(`/courses/${courseID}/people`);\r\n                    let people = res.data;\r\n                    if (people.length > c.length) {\r\n                        people = people.filter(p => p.id != user.id);\r\n\r\n                        const recipients = people.map(p => p.id);\r\n                        for (const recipient of recipients) {\r\n                            await axios.post('chat/conversations', { recipients: [recipient, user.id], courseID });\r\n                        }\r\n\r\n                        res = await axios.get(`/chat/conversations/${courseID}`)\r\n                        c = res.data;\r\n                    }\r\n\r\n                    // Set online status\r\n                    c = await Promise.all(c.map(async conversation => {\r\n                        let recipients = await Promise.all(conversation.recipients.map(async r => {\r\n                            try {\r\n                                res = await axios.get(`/online_users/${r.id}`); \r\n                                console.log(res.data);\r\n                                return {...r, online: res.data};\r\n                            } catch (err) {\r\n                                console.log(err);\r\n                                return {...r, online: false};\r\n                            }\r\n                        }));\r\n\r\n                        conversation.recipients = recipients;\r\n                        return conversation;\r\n                    }));\r\n\r\n                    c = await Promise.all(c.map(async conversation => {\r\n                        try {\r\n                            res = await axios.get(`/chat/messages/${conversation.conversationID}`)\r\n                            return {...conversation, messages: res.data}\r\n                        } catch (err) {\r\n                            console.log(err);\r\n                        }\r\n                    }));\r\n                    console.log(c);\r\n                    setConversations(c);\r\n                } catch (err) {\r\n                    console.log(err);\r\n                }\r\n            }\r\n        }\r\n\r\n        getConversations();\r\n    }, [courseID, refresh])\r\n\r\n    const addMessageToConversation = useCallback(({ recipients, message, send_date, sender, conversationID, first_name, last_name }) => {\r\n        setConversations(prevConversations => {\r\n            const newMessage = { sender, message, send_date, first_name, last_name }\r\n            const newConversations = prevConversations.map(conversation => {\r\n                if (conversation.conversationID === conversationID) {\r\n                    return {\r\n                        ...conversation,\r\n                        messages: [...conversation.messages, newMessage]\r\n                    }\r\n                }\r\n\r\n                return conversation\r\n            })\r\n\r\n            return newConversations\r\n        });\r\n\r\n    }, [setConversations]);\r\n\r\n    useEffect(() => {\r\n        if (socket == null) return\r\n\r\n        socket.on('receive-message', addMessageToConversation);\r\n        socket.on('user-connection', () => {\r\n            setRefresh(old => 1 - old)\r\n        });\r\n\r\n        return () => socket.off('receive-message')\r\n    }, [socket, addMessageToConversation])\r\n\r\n\r\n    function sendMessage(recipients, message, conversationID) {\r\n        let send_date = moment.utc().format('YYYY-MM-DD HH:mm:ss');\r\n        axios.post('/chat/messages', {\r\n            conversationID,\r\n            message,\r\n            sender: user.id,\r\n            send_date,\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n\r\n        let data = {\r\n            recipients,\r\n            message,\r\n            sender: user.id,\r\n            send_date,\r\n            conversationID,\r\n            first_name: user.first_name,\r\n            last_name: user.last_name\r\n        }\r\n        socket.emit('send-message', data);\r\n        addMessageToConversation(data);\r\n    }\r\n\r\n    const formattedConversations = conversations.length != 0 ? conversations.map((conversation, index) => {\r\n        let recipients = conversation.recipients.filter(recipient => recipient.id != user.id);\r\n        recipients = recipients.map(recipient => {\r\n            const name = `${recipient.first_name} ${recipient.last_name}`;\r\n            return { id: recipient.id, name, online: recipient.online };\r\n        });\r\n\r\n\r\n        const messages = conversation.messages.map(message => {\r\n            const name = `${message.first_name} ${message.last_name}`;\r\n            const fromMe = user.id === message.sender\r\n            return { ...message, senderName: name, fromMe }\r\n        });\r\n\r\n        const selected = index === selectedConversationIndex\r\n        return { ...conversation, messages, recipients, selected }\r\n    }) : conversations;\r\n\r\n    const value = {\r\n        conversations: formattedConversations,\r\n        selectedConversation: formattedConversations[selectedConversationIndex],\r\n        sendMessage,\r\n        selectConversationIndex: setSelectedConversationIndex,\r\n        user\r\n    }\r\n\r\n    return (\r\n        <ConversationsContext.Provider value={value}>\r\n            {children}\r\n        </ConversationsContext.Provider>\r\n    )\r\n}\r\n\r\nfunction arrayEquality(a, b) {\r\n    if (a.length !== b.length) return false\r\n\r\n    a.sort()\r\n    b.sort()\r\n\r\n    return a.every((element, index) => {\r\n        return element === b[index]\r\n    });\r\n}","import React, { useState, useRef, useEffect } from 'react'\r\nimport { ListGroup } from 'react-bootstrap'\r\nimport axios from 'axios';\r\n\r\nexport default function ChatCourses({setSelectedCourseID}) {\r\n  const [courses, setCourses] = useState([]);\r\n  const [selectedCourseIndex, setSelectedCourseIndex] = useState(-1);\r\n  const coursesRef = useRef([]);\r\n\r\n  function getCoursesFromResponse(res) {\r\n    coursesRef.current = coursesRef.current.concat(res.data);\r\n    setCourses(coursesRef.current);\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        switch (res.data) {\r\n          case 'admin':\r\n            axios.get('/courses').then(getCoursesFromResponse);\r\n            break;\r\n          case 'instructor':\r\n            axios.get('/courses/instructor').then(getCoursesFromResponse);\r\n            break;\r\n          case 'student':\r\n            axios.get('/courses/instructor').then(getCoursesFromResponse);\r\n            axios.get('/courses/student').then(getCoursesFromResponse);\r\n            break;\r\n          default:\r\n            throw new Error('Invalid role.');\r\n        }\r\n      })\r\n      .catch(console.log);\r\n  }, []);\r\n\r\n  return (\r\n    <ListGroup variant=\"flush\">\r\n      {courses.map((course, index) => (\r\n        <ListGroup.Item\r\n          key={index}\r\n          action\r\n          onClick={() => {\r\n            setSelectedCourseIndex(index);\r\n            setSelectedCourseID(course.course_id);\r\n          }}\r\n          active={index === selectedCourseIndex}\r\n        >\r\n          {course.course_name}\r\n        </ListGroup.Item>\r\n      ))}\r\n    </ListGroup>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { useConversations } from './ConversationsProvider';\r\nimport axios from 'axios';\r\nimport { ListGroup } from 'react-bootstrap'\r\nimport { Button, Typography } from '@material-ui/core'\r\n\r\nexport default function CourseConversations({ setSelectedCourseID }) {\r\n    const { conversations, selectConversationIndex } = useConversations();\r\n\r\n    return (\r\n        <div>\r\n            <Button varient=\"flush\" onClick={() => setSelectedCourseID(-1)}> \r\n                {\"← Back to Courses\"}\r\n            </Button>\r\n            <ListGroup variant=\"flush\" className=\"overflow-auto flex-grow-1\">\r\n                {conversations.map((conversation, index) => {\r\n                    return (\r\n                        <ListGroup.Item\r\n                            key={index}\r\n                            action\r\n                            onClick={() => selectConversationIndex(index)}\r\n                            active={conversation.selected}\r\n                        >\r\n                            {\r\n                                // This part is really ugly, but honestly I do not want to try to restructure the architecture of everything. \r\n                                // May the lord forgive me for my sins.\r\n                                conversation.recipients.length !== 1 ?\r\n                                \"Course Chat\" :\r\n                                conversation.recipients[0].online ? <><b style={{ color: 'green' }}>•</b> {conversation.recipients[0].name}</>\r\n                                :\r\n                                <>{conversation.recipients[0].name}</>\r\n                            }\r\n                        </ListGroup.Item>\r\n                    );\r\n                })}\r\n            </ListGroup>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport ChatCourses from './ChatCourses';\r\nimport CourseConversations from './CourseConversations';\r\n\r\nexport default function ChatSidebar({setSelectedCourseID, selectedCourseID}) {\r\n    return (\r\n        <div style={{ width: '250px' }} className=\"d-flex flex-column\">\r\n          <div className=\"border-right overflow-auto flex-grow-1 d-flex flex-column\">\r\n            {selectedCourseID == -1 ? <ChatCourses setSelectedCourseID={setSelectedCourseID}/> : <CourseConversations setSelectedCourseID={setSelectedCourseID} />}\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useCallback, useEffect, useRef } from 'react';\r\nimport { Form, InputGroup, Button } from 'react-bootstrap';\r\nimport { useConversations } from './ConversationsProvider';\r\nimport { useSocket } from './SocketProvider';\r\nimport moment from 'moment';\r\n\r\nexport default function OpenConversation() {\r\n    const [text, setText] = useState('');\r\n    const [typingUsers, setTypingUsers] = useState([]);\r\n    const [typingTimeout, setTypingTimeout] = useState(undefined);\r\n    const { sendMessage, selectedConversation, user } = useConversations();\r\n    const convoRef = useRef(selectedConversation);\r\n    const socket = useSocket();\r\n\r\n    useEffect(() => {\r\n        convoRef.current = selectedConversation;\r\n    }, [selectedConversation]);\r\n\r\n    useEffect(() => {\r\n        if (socket == null) return;\r\n        socket.on('user-typing', data => {\r\n            setTypingUsers(prevTypingUsers => {\r\n                if (convoRef.current && convoRef.current.conversationID == data.conversationID) {\r\n                    if (prevTypingUsers.includes(data.name)) {\r\n                        return prevTypingUsers;\r\n                    } else {\r\n                        return [data.name, ...prevTypingUsers];\r\n                    }\r\n                }\r\n                return prevTypingUsers;\r\n            });\r\n        });\r\n\r\n        socket.on('user-stopped-typing', data => {\r\n            setTypingUsers(prevTypingUsers => {\r\n                const idx = prevTypingUsers.indexOf(data.name);\r\n                prevTypingUsers.splice(idx, 1);\r\n                if (prevTypingUsers.length == 0) { \r\n                    return [];\r\n                }\r\n                return prevTypingUsers;\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            socket.off('user-typing');\r\n            socket.off('user-stopped-typing');\r\n        }\r\n    }, [socket]);\r\n\r\n\r\n    const setRef = useCallback(node => {\r\n        if (node) {\r\n            node.scrollIntoView({ smooth: true });\r\n        }\r\n    }, []);\r\n\r\n    function typingTimeoutFunction(recipients) {\r\n        socket.emit('typing', { first_name: user.first_name, last_name: user.last_name,\r\n            recipients, typing: false});\r\n    }\r\n\r\n    function startTyping() {\r\n        if (selectedConversation) {\r\n            socket.emit('typing', { first_name: user.first_name, last_name: user.last_name,\r\n                recipients: selectedConversation.recipients, conversationID: selectedConversation.conversationID, typing: true });\r\n            clearTimeout(typingTimeout);\r\n            setTypingTimeout(setTimeout(() => typingTimeoutFunction(selectedConversation.recipients), 1000));\r\n        }\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        if (selectedConversation) {\r\n            sendMessage(\r\n                selectedConversation.recipients,\r\n                text,\r\n                selectedConversation.conversationID\r\n            );\r\n\r\n            setText('');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex flex-column flex-grow-1\">\r\n            <div className=\"flex-grow-1 overflow-auto\">\r\n                <div className=\"d-flex flex-column align-items-start justify-content-end px-3\">\r\n                    {selectedConversation ? selectedConversation.messages.map((message, index) => {\r\n                        const lastMessage = selectedConversation.messages.length - 1 === index\r\n                        const diff = moment.utc().diff(moment.utc(moment(message.send_date).format('YYYY-MM-DD HH:mm:ss')));\r\n                        const duration = moment.duration(diff).humanize();\r\n                        return (\r\n                            <div\r\n                                ref={lastMessage ? setRef : null}\r\n                                key={index}\r\n                                className={`my-1 d-flex flex-column ${message.fromMe ? 'align-self-end align-items-end' : 'align-items-start'}`}\r\n                            >\r\n                                <div\r\n                                    className={`rounded px-2 py-1 ${message.fromMe ? 'bg-primary text-white' : 'border'}`}>\r\n                                    {message.message}\r\n                                </div>\r\n                                <div className={`text-muted small ${message.fromMe ? 'text-right' : ''}`}>\r\n                                    {`${message.fromMe ? 'You' : message.senderName} ${duration} ago`}\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    }) :\r\n                    ''}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                {typingUsers.length > 0 ? typingUsers.join(', ') + ' is typing...' : ''}\r\n            </div>\r\n            <Form onSubmit={handleSubmit}>\r\n                <Form.Group className=\"m-2\">\r\n                    <InputGroup>\r\n                        <Form.Control\r\n                            as=\"textarea\"\r\n                            required\r\n                            value={text}\r\n                            onChange={e => {\r\n                                startTyping();\r\n                                setText(e.target.value)\r\n                            }}\r\n                            style={{ height: '75px', resize: 'none' }}\r\n                        />\r\n                        <InputGroup.Append>\r\n                            <Button type=\"submit\">Send</Button>\r\n                        </InputGroup.Append>\r\n                    </InputGroup>\r\n                </Form.Group>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport { List, Drawer, Dialog, AppBar, Toolbar, Typography, IconButton, ListItem } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Form, InputGroup, Button } from 'react-bootstrap';\r\nimport { SocketProvider } from './SocketProvider';\r\nimport ConversationsProvider from './ConversationsProvider';\r\nimport ChatSidebar from './ChatSidebar';\r\nimport OpenConversation from './OpenConversation';\r\nimport axios from 'axios';\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    marginLeft: drawerWidth,\r\n  },\r\n  // necessary for content to be below app bar\r\n  content: {\r\n    padding: theme.spacing(1),\r\n    marginLeft: drawerWidth,\r\n  },\r\n}));\r\n\r\nexport default function Chat({ open, setOpen }) {\r\n  const [user, setUser] = useState({id: -1});\r\n  const [selectedCourseID, setSelectedCourseID] = useState(-1);\r\n\r\n  useEffect(() => {\r\n      axios.get('/userInfo')\r\n          .then(res => {\r\n              setUser(res.data);\r\n          })\r\n          .catch(console.log);\r\n  }, [])\r\n  \r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  }\r\n\r\n  return (\r\n    <Dialog fullScreen open={open} onClose={handleClose}>\r\n      <AppBar position=\"sticky\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\" s>\r\n            Chat\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <div className=\"d-flex\" style={{height: '93vh'}}>\r\n        <SocketProvider id={user.id}>\r\n          <ConversationsProvider courseID={selectedCourseID} user={user}>\r\n            <ChatSidebar selectedCourseID={selectedCourseID} setSelectedCourseID={setSelectedCourseID}/>\r\n            <OpenConversation />\r\n          </ConversationsProvider>\r\n        </SocketProvider>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n}","import AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Typography, Switch, Menu, MenuItem, IconButton } from '@material-ui/core';\r\nimport { fade, makeStyles, withStyles} from '@material-ui/core/styles';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport axios from 'axios';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport Chat from './Chat';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\n\r\nvar notifications = [{\"type\": \"File Upload\", \"body\": \"Upload approval\"}, \r\n                        {\"type\": \"Message\", \"body\": \"Message notification\"},\r\n                        {\"type\": \"File Upload\", \"body\": \"Upload approval\"}, \r\n                        {\"type\": \"Message\", \"body\": \"Message notification\"}];\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    marginLeft: drawerWidth,\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  notificationButton: {\r\n    margin: theme.spacing(2),\r\n  },\r\n  search: {\r\n    margin: theme.spacing(2),\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(1),\r\n      width: 'auto',\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    // vertical padding + font size from searchIcon\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: '12ch',\r\n      '&:focus': {\r\n        width: '20ch',\r\n      },\r\n    },\r\n  },\r\n  listbox: {\r\n    width: 200,\r\n    margin: 0,\r\n    padding: 0,\r\n    zIndex: 1,\r\n    position: 'absolute',\r\n    listStyle: 'none',\r\n    backgroundColor: theme.palette.background.paper,\r\n    overflow: 'auto',\r\n    maxHeight: 200,\r\n    border: '1px solid rgba(0,0,0,.25)',\r\n    '& li[data-focus=\"true\"]': {\r\n      backgroundColor: '#4a8df6',\r\n      color: 'white',\r\n      cursor: 'pointer',\r\n    },\r\n    '& li:active': {\r\n      backgroundColor: '#2977f5',\r\n      color: 'white',\r\n    },\r\n  },\r\n}));\r\n\r\nfunction Navbar(props) {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [open, setOpen] = React.useState(false);\r\n  let widgetNum = props.widgetNum;\r\n  \r\n  const handleAccountClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    axios.post('/logout')\r\n      .then(res => props.history.push('/'))\r\n      .catch(console.log);\r\n    if (props.darkState == true) {\r\n      props.handleThemeChange();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <AppBar position=\"fixed\" className={classes.appBar} color=\"primary\">\r\n        <Toolbar>\r\n          <Typography color=\"secondary\" align=\"left\" variant=\"h6\" className={classes.title}>\r\n            instructED\r\n          </Typography>\r\n          <IconButton\r\n            color=\"secondary\"\r\n            onClick={props.removeWidgetClick} >\r\n            <RemoveIcon />\r\n          </IconButton>\r\n          <IconButton\r\n            color=\"secondary\"\r\n            onClick={props.addWidgetClick}\r\n            className={classes.menuButton} >\r\n            <AddIcon />\r\n          </IconButton>\r\n          <Switch\r\n            checked={props.darkState}\r\n            onChange={props.handleThemeChange}\r\n            className={classes.menuButton} />\r\n          <IconButton\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              setOpen(true);\r\n            }}\r\n            className={classes.menuButton} >\r\n              <ChatIcon />\r\n          </IconButton>\r\n          <IconButton\r\n            color=\"secondary\"\r\n            onClick={handleAccountClick}\r\n            className={classes.menuButton}>\r\n              <AccountCircleIcon />\r\n          </IconButton>\r\n          <Menu\r\n            id=\"profile\"\r\n            anchorEl={anchorEl}\r\n            keepMounted\r\n            open={Boolean(anchorEl)}\r\n            onClose={handleClose}\r\n          >\r\n            <MenuItem onClick={handleLogout}>Logout</MenuItem>\r\n          </Menu>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Chat open={open} setOpen={setOpen} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Navbar);\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { List, ListItemText, ListItem, Divider, Typography } from '@material-ui/core';\r\nimport moment from 'moment';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    items: {\r\n      margin:theme.spacing(1),\r\n    },\r\n    root: {\r\n      '& .MuiFormControl-root': {\r\n        width:'75%',\r\n        margin:theme.spacing(1),\r\n        display:'flex'\r\n      }\r\n    },\r\n  }))\r\n\r\nexport default function Announcements(props) {\r\n    const classes = useStyle();\r\n    const [announcements, setAnnouncements] = useState([]);\r\n    const announcementsRef = useRef([]);\r\n\r\n    useEffect(() => {\r\n        axios.get('/roles')\r\n        .then(res => {\r\n            switch (res.data) {\r\n            case 'admin':\r\n                axios.get('/announcements').then(getAnnouncementsFromResponse);\r\n                break;\r\n            case 'instructor':\r\n                axios.get('/announcements/instructor').then(getAnnouncementsFromResponse);\r\n                break;\r\n            case 'student':\r\n                axios.get('/announcements/instructor').then(getAnnouncementsFromResponse);\r\n                axios.get('/announcements/student').then(getAnnouncementsFromResponse);\r\n                break;\r\n            default:\r\n                throw new Error('Invalid role.');\r\n            }\r\n        })\r\n        .catch(err => console.log(err));\r\n    }, []);\r\n\r\n    function getAnnouncementsFromResponse(res) {\r\n        announcementsRef.current = announcementsRef.current.concat(res.data);\r\n        setAnnouncements(announcementsRef.current);\r\n    }\r\n\r\n    {\r\n        if (announcements.length > 0) {\r\n            return (\r\n                <List>\r\n                {announcements.map((announcement) => {\r\n                    const title = announcement.course_name + \": \" + announcement.announcement_name;\r\n                    let date = moment(announcement.date_created).local();\r\n                    date = date.format('MM-DD-YY h:mm A');\r\n        \r\n                    return (\r\n                    <>\r\n                        <ListItem>\r\n                            <ListItemText primary={title} secondary={date} />\r\n                        </ListItem>\r\n                        <Divider />\r\n                    </>\r\n                    );\r\n                })}\r\n                </List>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <Typography variant=\"body\" className={classes.items}>No announcements to display!</Typography>\r\n            );\r\n        }\r\n    }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport Calendar from 'react-calendar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { List, ListItemText, Paper, IconButton, Drawer, Divider, ListItem, Typography, Dialog, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  }\r\n}));\r\n\r\nfunction AssignmentDialog({dateSelected, open, setOpen}) {\r\n  const classes = useStyles();\r\n  const dateSelectedString = dateSelected.toDateString();\r\n  const [assignments, setAssignments] = useState([]);\r\n\r\n  //Select class given given date\r\n  useEffect(() => {\r\n    if (dateSelected != null) {\r\n      axios.get(`/assignments/date/${moment(dateSelected).utc().format()}`)\r\n        .then(res => {\r\n          setAssignments(res.data);\r\n        })\r\n        .catch(console.log);\r\n    }\r\n  }, [dateSelected]);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog fullScreen open={open} onClose={handleClose}>\r\n    <AppBar className={classes.appBar}>\r\n      <Toolbar className={classes.toolbar}>\r\n        <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n        <Typography variant=\"h6\" className={classes.title}>\r\n          {dateSelectedString}\r\n        </Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n    <Paper className={classes.dialog}>\r\n      <Typography variant=\"h6\">\r\n        Assignments:\r\n      </Typography>\r\n      <List>\r\n          {assignments.map(assignment => {\r\n            let assignmentdate = moment(assignment.deadline).local();\r\n            assignmentdate = assignmentdate.format('[Due on] MM-DD-YY [at] h:mm A');\r\n\r\n            return (\r\n              <ListItem>\r\n                <ListItemText primary={assignment.assignment_name} secondary={assignmentdate} />\r\n              </ListItem>\r\n            );\r\n          })}\r\n      </List>\r\n    </Paper>\r\n  </Dialog>\r\n  );\r\n}\r\n\r\nexport default function TaskCalendar() {\r\n  const [date, setDate] = useState(new Date(Date.now()));\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n\r\n  //const onChange = date => {\r\n    //setDate(date);\r\n  //};\r\n\r\n  const onClickDay = date => {\r\n    setOpen(true);\r\n    setDate(date);\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Calendar\r\n        //onChange={onChange}\r\n        onClickDay={onClickDay}\r\n        value={date}\r\n      />\r\n      <AssignmentDialog dateSelected={date} open={open} setOpen={setOpen} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Paper, TextField, Grid, Button, FormControl, InputLabel, Select, MenuItem } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  items: {\r\n    margin: theme.spacing(1),\r\n    paddingRight: theme.spacing(2)\r\n  },\r\n  root: {\r\n    '& .MuiFormControl-root': {\r\n      width: '75%',\r\n      margin: theme.spacing(1),\r\n      display: 'flex'\r\n    }\r\n  },\r\n}))\r\n\r\n\r\nexport default function AddCourse() {\r\n  const classes = useStyle();\r\n  const blankCourse = {courseName: '', courseNumber: '', courseDept: '', instructorID: '', courseTerm: ''};\r\n  const [values, setValues] = useState(blankCourse);\r\n\r\n  const handleInputChange = e => {\r\n    const {name, value} = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name] : value\r\n    });\r\n  }\r\n\r\n  const onClick = (e) => {\r\n    e.preventDefault();\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        if (res.data === 'admin') {\r\n          console.log(values);\r\n          axios.post('/courses', values)\r\n            .then(res => {\r\n              if (res.status === 201) {\r\n                alert('Course created!');\r\n              }\r\n            })\r\n            .catch(console.log);\r\n        }\r\n      })\r\n      .catch(console.log);\r\n  };\r\n\r\n  return (\r\n    <Paper className=\"root\">\r\n      <form>\r\n        <Grid height=\"100%\" spacing={1}>\r\n          <Grid item xs=\"12\">\r\n            <TextField color=\"secondary\" variant=\"outlined\" label=\"Class Name\" name=\"courseName\" className={classes.items} onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField color=\"secondary\" variant=\"outlined\" label=\"Class Number\" name=\"courseNumber\" className={classes.items} onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField color=\"secondary\" variant=\"outlined\" label=\"Department\" name=\"courseDept\" className={classes.items} onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField color=\"secondary\" variant=\"outlined\" label=\"Instructor ID\" name=\"instructorID\" className={classes.items} onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <FormControl color=\"secondary\" variant=\"outlined\" className={classes.items} fullWidth>\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Term</InputLabel>\r\n            <Select\r\n              color=\"secondary\"\r\n              style={{ width: 150 }}\r\n              onChange={handleInputChange}\r\n              label=\"Term\"\r\n              name=\"courseTerm\"\r\n            >\r\n              <MenuItem value={'SP21'}>Spring 2021</MenuItem>\r\n              <MenuItem value={'FA21'}>Fall 2021</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <Grid item xs=\"12\">\r\n            <Button variant=\"contained\" color=\"secondary\" className={classes.items} onClick={onClick}>Add Course</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { FormControl, InputLabel, Select, Paper, TextField, Grid, Button, IconButton, Menu, MenuItem, Typography, Toolbar } from '@material-ui/core';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\n\r\nconst ITEM_HEIGHT = 50;\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  items: {\r\n    margin:theme.spacing(1),\r\n    paddingRight: theme.spacing(2)\r\n  },\r\n  /*\r\n  root: {\r\n    '& .MuiFormControl-root': {\r\n      width:'75%',\r\n      margin:theme.spacing(1),\r\n      display:'flex'\r\n    }\r\n  },\r\n  */\r\n}))\r\n\r\nexport default function CreateAnnouncement() {\r\n  const classes = useStyle();\r\n  const noCourse = {course_id: undefined, course_name: 'Select a Course', course_term: ''};\r\n  const [courses, setCourses] = useState([]);\r\n  const [currentCourse, setCurrentCourse] = useState(noCourse);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const [values, setValues] = useState({announcementName: '', description: ''});\r\n\r\n  const handleInputChange = e => {\r\n    const {name, value} = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name] : value\r\n    });\r\n  }\r\n\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  function handleClose(course) {\r\n    setAnchorEl(null);\r\n    setCurrentCourse(course);\r\n  }\r\n\r\n  const handleCourseChange = (event) => {\r\n    setCurrentCourse(event.target.value);\r\n  }\r\n\r\n  const getCurrentCourseName = () => {\r\n    return currentCourse.course_name;\r\n  }\r\n\r\n  const onClick = (e) => {\r\n    e.preventDefault();\r\n    if (currentCourse.course_id && values.announcementName !== '' && values.description !== '') {\r\n      axios.post('/announcements', {\r\n        ...values,\r\n        courseID: currentCourse.course_id\r\n      }).then(res => {\r\n        if (res.status === 201) {\r\n          alert('Announcement created!');\r\n          setValues({announcementName: '', description: ''});\r\n        }\r\n      });\r\n    } else {\r\n      alert('All fields must be filled.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        switch (res.data) {\r\n          case 'admin':\r\n            axios.get('/courses').then(res => setCourses(res.data));\r\n            break;\r\n          case 'instructor':\r\n          case 'student':\r\n            axios.get('/courses/instructor').then(res => setCourses(res.data));\r\n            break;\r\n          default:\r\n            throw new Error('Invalid role.');\r\n        }\r\n      })\r\n      .catch(console.log);\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <form>\r\n        <Grid height=\"100%\" spacing={1} classname={classes.items}>\r\n          <Grid item xs=\"12\">\r\n          <FormControl color=\"secondary\" variant=\"outlined\" className={classes.items} fullWidth>\r\n          <InputLabel>Course</InputLabel>\r\n          <Select\r\n              color=\"secondary\"\r\n              displayEmpty={true}\r\n              onChange={handleCourseChange}\r\n              value={currentCourse}\r\n              renderValue={getCurrentCourseName}\r\n              label=\"Course\"\r\n              name=\"course\"\r\n              required\r\n            >\r\n                {courses.map((course) => (\r\n                  <MenuItem \r\n                    key={course.course_name} \r\n                    value={course}>\r\n                    {course.course_name}\r\n                  </MenuItem>\r\n                ))}\r\n          </Select>\r\n        </FormControl>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField className={classes.items} color=\"secondary\" variant=\"outlined\" label=\"Announcement Title\" value={values.announcementName} name=\"announcementName\" onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField className={classes.items} color=\"secondary\" multiline=\"true\" variant=\"outlined\" label=\"Description\" value={values.description} name=\"description\" onChange={handleInputChange} rows=\"4\" fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\" classname={classes.items}>\r\n            <Button className={classes.items} variant=\"contained\" color=\"secondary\" onClick={onClick}>Post Announcement</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport { Paper, TextField, Grid, Button, FormControl, InputLabel, Select, MenuItem } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  items: {\r\n    margin:theme.spacing(1),\r\n    paddingRight: theme.spacing(2)\r\n  },\r\n  root: {\r\n    '& .MuiFormControl-root': {\r\n      width:'75%',\r\n      margin:theme.spacing(1),\r\n      display:'flex'\r\n    }\r\n  },\r\n}))\r\n\r\nexport default function AddToClass() {\r\n  const classes = useStyle();\r\n  const blankAdd = {courseID: '', userID: '', role: ''};\r\n  const [values, setValues] = useState(blankAdd);\r\n\r\n  const handleInputChange = e => {\r\n    const {name, value} = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  const onClick = e => {\r\n    e.preventDefault();\r\n    console.log(values);\r\n    switch (values.role) {\r\n      case 'Instructor':\r\n        axios.post('/instructing', values)\r\n          .then(res => {\r\n            if (res.status === 201) {\r\n              alert(res.data);\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n        break;\r\n      case 'Student':\r\n        axios.post('/enrollments', values)\r\n          .then(res => {\r\n            if (res.status === 201) {\r\n              alert(res.data);\r\n            }\r\n          })\r\n          .catch(err => {\r\n            alert(err.response.data);\r\n          });\r\n        break;\r\n      default:\r\n        alert('Role not provided.')\r\n        break;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Paper className=\"root\">\r\n      <form>\r\n        <Grid height=\"100%\" spacing={1}>\r\n          <Grid item xs=\"12\">\r\n            <TextField required color=\"secondary\" variant=\"outlined\" label=\"Course ID\" name=\"courseID\" className={classes.items} onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField required color=\"secondary\" variant=\"outlined\" label=\"User ID\" name=\"userID\" className={classes.items} onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <FormControl color=\"secondary\" variant=\"outlined\" className={classes.items} fullWidth>\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Role in Class</InputLabel>\r\n            <Select\r\n              color=\"secondary\"\r\n              style={{ width: 150 }}\r\n              onChange={handleInputChange}\r\n              label=\"Role in Class\"\r\n              name=\"role\"\r\n            >\r\n              <MenuItem value={'Instructor'}>Instructor</MenuItem>\r\n              <MenuItem value={'Student'}>Student</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <Grid item xs=\"12\">\r\n            <Button variant=\"contained\" color=\"secondary\" className={classes.items} onClick={onClick}>Add to Class</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport { Paper, TextField, Grid, Button, FormControl, InputLabel, Select, MenuItem } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  items: {\r\n    margin: theme.spacing(1),\r\n    paddingRight: theme.spacing(2)\r\n  },\r\n  root: {\r\n    '& .MuiFormControl-root': {\r\n      width: '75%',\r\n      margin: theme.spacing(1),\r\n      display: 'flex'\r\n    }\r\n  },\r\n}))\r\n\r\nexport default function SetRole() {\r\n  const classes = useStyle();\r\n  const blankRole = { userID: '', role: '' };\r\n  const [values, setValues] = useState(blankRole);\r\n\r\n  const handleInputChange = e => {\r\n    const { name, value } = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  const onClick = e => {\r\n    e.preventDefault();\r\n    axios.put('/roles', values)\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          alert('Role changed successfully.');\r\n        }\r\n      })\r\n      .catch(err => {\r\n        alert(err.response.data);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Paper className=\"root\">\r\n      <form>\r\n        <Grid height=\"100%\" spacing={1}>\r\n          <Grid item xs=\"12\">\r\n            <TextField required color=\"secondary\" variant=\"outlined\" label=\"User ID\" name=\"userID\" className={classes.items} onChange={handleInputChange} fullWidth/>\r\n          </Grid>\r\n          <FormControl color=\"secondary\" variant=\"outlined\" className={classes.items} fullWidth>\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Role</InputLabel>\r\n            <Select\r\n              color=\"secondary\"\r\n              style={{ width: 150 }}\r\n              onChange={handleInputChange}\r\n              label=\"Role\"\r\n              name=\"role\"\r\n            >\r\n              <MenuItem value={'admin'}>Admin</MenuItem>\r\n              <MenuItem value={'instructor'}>Instructor</MenuItem>\r\n              <MenuItem value={'student'}>Student</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <Grid item xs=\"12\">\r\n            <Button variant=\"contained\" color=\"secondary\" className={classes.items} onClick={onClick}>Set Role</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { List, ListItemText, ListItem, Divider, Typography } from '@material-ui/core'\r\nimport moment from 'moment';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    items: {\r\n      margin:theme.spacing(1),\r\n    },\r\n    root: {\r\n      '& .MuiFormControl-root': {\r\n        width:'75%',\r\n        margin:theme.spacing(1),\r\n        display:'flex'\r\n      }\r\n    },\r\n  }))\r\n\r\nexport default function UpcomingAssignments() {\r\n    const classes = useStyle();\r\n    const [assignments, setAssignments] = useState([]);\r\n    \r\n    useEffect(() => {\r\n        axios.get('/roles')\r\n        .then(res => {\r\n            if (res.data !== 'admin') {\r\n                axios.get(`/assignments/upcoming/${moment(Date.now()).utc().format()}`)\r\n                    .then(res => setAssignments(res.data))\r\n                    .catch(console.log);\r\n            }\r\n        })\r\n        .catch(err => console.log(err));\r\n    }, []);\r\n\r\n    {\r\n        if (assignments.length > 0) {\r\n            return (\r\n                <List>\r\n                {\r\n                    assignments.map((assignment) => {\r\n                        let assignmentdate = moment(assignment.deadline).local();\r\n                        assignmentdate = assignmentdate.format('[Due on] MM-DD-YY [at] h:mm A');\r\n    \r\n                        return (<>\r\n                            <ListItem>\r\n                                <ListItemText primary={assignment.assignment_name} secondary={assignmentdate} />\r\n                            </ListItem>\r\n                            <Divider />\r\n                        </>);\r\n                    })\r\n                }\r\n                </List>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <Typography variant=\"body\" className={classes.items}>No assignments to display!</Typography>\r\n            );\r\n        }\r\n    }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { FormControl, InputLabel, Select, Paper, TextField, Grid, Button, IconButton, Menu, MenuItem, Typography, Toolbar, Divider } from '@material-ui/core';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\nimport Calendar from 'react-calendar';\r\n\r\nconst ITEM_HEIGHT = 50;\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  items: {\r\n    margin: theme.spacing(1),\r\n    paddingRight: theme.spacing(2)\r\n  },\r\n}))\r\n\r\nexport default function CreateAssignment() {\r\n  const classes = useStyle();\r\n  const noCourse = {course_id: undefined, course_name: 'Select a Course', course_term: ''};\r\n  const [courses, setCourses] = useState([]);\r\n  const [currentCourse, setCurrentCourse] = useState(noCourse);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [tAnchorEl, setTAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const topen = Boolean(tAnchorEl);\r\n  const [assignmentName, setAssignmentName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const [date, setDate] = React.useState(new Date(Date.now()));\r\n  const [time, setTime] = React.useState('');\r\n  const [dateString, setDateString] = React.useState(date.toDateString());\r\n  const [amOrPM, setAmOrPM] = React.useState('PM');\r\n\r\n  const handleDescriptionChange = e => {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  const handleAssignmentChange = e => {\r\n    setAssignmentName(e.target.value);\r\n  }\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleTClick = (event) => {\r\n    setTAnchorEl(event.currentTarget);\r\n  }\r\n\r\n  const handleCourseChange = (event) => {\r\n    setCurrentCourse(event.target.value);\r\n  }\r\n  function handleCloseCourse(course) {\r\n    setAnchorEl(null);\r\n    setCurrentCourse(course);\r\n  }\r\n\r\n  function handleCloseTime(timeOfDay){\r\n    setTAnchorEl(null);\r\n    setAmOrPM(timeOfDay);\r\n  }\r\n\r\n  const handleTimeChange = e => {\r\n    setTime(e.target.value);\r\n  }\r\n\r\n  const onClickDayCD = day => {\r\n    setDate(day);\r\n    setDateString(date.toDateString());\r\n    console.log(date.toDateString());\r\n  }\r\n\r\n  const getCurrentCourseName = () => {\r\n    return currentCourse.course_name;\r\n  }\r\n\r\n\r\n  const onClick = (e) => {\r\n    //e.preventDefault();\r\n    if (currentCourse.course_id && assignmentName !== '' && description !== '' && date !== '' && time !== '') {\r\n      let hour = Number(time.split(':')[0]);\r\n      let minute = Number(time.split(':')[1]);\r\n      if(hour < 0 || hour > 12 || minute < 0 || minute > 59){\r\n        alert(\"Hours must be between 0-12, minutes must be between 0-59.\");\r\n      }\r\n      else {\r\n        if(amOrPM == 'PM'){\r\n          hour = hour + 12;\r\n        }\r\n        date.setHours(hour);\r\n        date.setMinutes(minute);\r\n        console.log(date.toDateString());\r\n      axios.post('/assignments', {\r\n        assignmentName,\r\n        description,\r\n        courseID: currentCourse.course_id,\r\n        date\r\n      }).then(res => {\r\n        if (res.status === 201) {\r\n          alert('Assignment created!');\r\n          setAssignmentName('');\r\n          setDescription('');\r\n          setDate(new Date(Date.now()));\r\n          setTime('');\r\n        }\r\n      }); \r\n    }\r\n    } else {\r\n      alert('All fields must be filled.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        switch (res.data) {\r\n          case 'admin':\r\n            axios.get('/courses').then(res => setCourses(res.data));\r\n            break;\r\n          case 'instructor':\r\n          case 'student':\r\n            axios.get('/courses/instructor').then(res => setCourses(res.data));\r\n            break;\r\n          default:\r\n            throw new Error('Invalid role.');\r\n        }\r\n      })\r\n      .catch(console.log);\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <Paper>\r\n      <form>\r\n        <Grid height=\"100%\" spacing={1}>\r\n          <Grid item xs=\"12\">\r\n          <FormControl color=\"secondary\" variant=\"outlined\" className={classes.items} fullWidth>\r\n          <InputLabel>Course</InputLabel>\r\n          <Select\r\n              color=\"secondary\"\r\n              displayEmpty={true}\r\n              onChange={handleCourseChange}\r\n              value={currentCourse}\r\n              renderValue={getCurrentCourseName}\r\n              label=\"Course\"\r\n              name=\"course\"\r\n              required\r\n            >\r\n                {courses.map((course) => (\r\n                  <MenuItem \r\n                    key={course.course_name} \r\n                    value={course}>\r\n                    {course.course_name}\r\n                  </MenuItem>\r\n                ))}\r\n          </Select>\r\n        </FormControl>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField className={classes.items} color=\"secondary\" variant=\"outlined\" label=\"Assignment Name\" value={assignmentName} name=\"assignmentName\" onChange={handleAssignmentChange} fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField className={classes.items} color=\"secondary\" multiline=\"true\" variant=\"outlined\" label=\"Description\" value={description} name=\"description\" onChange={handleDescriptionChange} rows=\"4\" fullWidth/>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n          <Calendar\r\n            //onChange={onChange}\r\n            onClickDay={onClickDayCD}\r\n            value={date}\r\n            />\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <TextField className={classes.items} color=\"secondary\" multiline=\"true\" variant=\"outlined\" label=\"Time\" value={time} name=\"time\" onChange={handleTimeChange}  fullWidth/>\r\n            <Toolbar variant=\"dense\">\r\n              <Menu\r\n                id=\"time-menu\"\r\n                anchorEl={tAnchorEl}\r\n                keepMounted\r\n                open={topen}\r\n                onClose={() => handleCloseTime(amOrPM)}\r\n                PaperProps={{\r\n                  style: {\r\n                    maxHeight: ITEM_HEIGHT * 4.5,\r\n                    width: '20ch',\r\n                  },\r\n                }}>\r\n                \r\n                  <MenuItem \r\n                    key={'AM'} \r\n                    selected={'AM' === amOrPM} \r\n                    onClick={() => handleCloseTime('AM')}>AM\r\n                  </MenuItem>\r\n\r\n                <MenuItem \r\n                  key={'PM'} \r\n                  selected={'PM' === amOrPM} \r\n                  onClick={() => handleCloseTime('PM')}>PM\r\n                </MenuItem>\r\n                \r\n              </Menu>\r\n              <Typography align=\"right\" variant=\"h6\" color=\"inherit\">\r\n                {amOrPM}\r\n              </Typography>\r\n              <IconButton\r\n                aria-label=\"more\"\r\n                aria-controls=\"time-menu\"\r\n                aria-haspopup=\"true\"\r\n                onClick={handleTClick}\r\n                color=\"secondary\"\r\n              >\r\n                <ArrowDropDownIcon />\r\n              </IconButton>\r\n            </Toolbar>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <Typography className={classes.items} variant=\"body2\" component=\"body2\">\r\n              {dateString + \" at \" + time + \" \" + amOrPM}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs=\"12\">\r\n            <Button className={classes.items} variant=\"contained\" color=\"secondary\" onClick={onClick}>Post Assignment</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}","import React, { useEffect, useState, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { Button, List, ListItemText, Select, InputLabel, FormControl, Grid, MenuItem, ListItemSecondaryAction, ListItem, Divider, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Typography } from '@material-ui/core'\r\nimport { spacing } from '@material-ui/system';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport moment from 'moment';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    items: {\r\n      margin: theme.spacing(1),\r\n      paddingRight: theme.spacing(2)\r\n    },\r\n    root: {\r\n      '& .MuiFormControl-root': {\r\n        width: '75%',\r\n        margin: theme.spacing(1),\r\n        display: 'flex'\r\n      }\r\n    },\r\n  }))\r\n\r\nexport default function UnapprovedFiles(){\r\n    const classes = useStyle();\r\n    const [files, setFiles] = useState([]);\r\n    //const [videos, setVideos] = useState([]);\r\n    //const [assignmentFiles, setAssignmentFiles] = useState([]);\r\n    const [file, setFile] = useState(null);\r\n    const [open, setOpen] = useState(false);\r\n    const [filter, setFilter] = React.useState('Course Files');\r\n    const filesRef = useRef([]);\r\n    const videosRef = useRef([]);\r\n    const assignmentFilesRef = useRef([]);\r\n    const courseFilesRef = useRef([]);\r\n    useEffect(() => {\r\n        videosRef.current = [];\r\n        assignmentFilesRef.current = [];\r\n        courseFilesRef.current = [];\r\n        filesRef.current = [];\r\n        //Get request for course files\r\n        if(filter === 'Course Files'){\r\n            axios.get(`/course_files/unapproved`)\r\n            .then(res => {getCourseFilesFromResponse(res)})\r\n            .catch(console.log);   \r\n        }\r\n        else if(filter === 'Assignment Files'){\r\n            //Get request for assignment files\r\n            axios.get(`/assignment_files/unapproved`)\r\n            .then(res => {getAssignmentFilesFromResponse(res)})\r\n            .catch(console.log); \r\n        }\r\n        else if(filter === 'Course Videos'){\r\n            //Get request for course videos\r\n            axios.get(`/course_videos/unapproved`)\r\n            .then(res => {getVideosFromResponse(res)})\r\n            .catch(console.log);   \r\n        }\r\n    }, [filter, open]);\r\n\r\n    const handleFilterChange = (event) => {\r\n        setFilter(event.target.value);\r\n        if(filter === 'Course Files'){\r\n            console.log(\"Course Files\");\r\n            filesRef.current = courseFilesRef.current;\r\n        }\r\n        else if(filter === 'Course Videos'){\r\n            console.log(\"Course Videos\");\r\n            filesRef.current = videosRef.current;\r\n        }\r\n        else if(filter === 'Assignment Files'){\r\n            console.log(\"Assignment Files\");\r\n            filesRef.current = assignmentFilesRef.current;\r\n        }\r\n    }\r\n\r\n    function getCourseFilesFromResponse(res){\r\n        courseFilesRef.current = courseFilesRef.current.concat(res.data);\r\n        console.log(courseFilesRef.current);\r\n        //filesRef.current = courseFilesRef.current;\r\n        setFiles(courseFilesRef.current);\r\n    }\r\n\r\n    function getVideosFromResponse(res){\r\n        videosRef.current = videosRef.current.concat(res.data);\r\n        //filesRef.current = videosRef.current;\r\n        setFiles(videosRef.current);\r\n    }\r\n\r\n    function getAssignmentFilesFromResponse(res){\r\n        assignmentFilesRef.current = assignmentFilesRef.current.concat(res.data);\r\n        //filesRef.current = assignmentFilesRef.current;\r\n        setFiles(assignmentFilesRef.current);\r\n    }\r\n\r\n    const viewBtnClicked =(filelistitem) => () => {\r\n        setOpen(true);\r\n        setFile(filelistitem);\r\n        var currentFilter = filter;\r\n        //Reset the list\r\n    }\r\n\r\n    //function fileListItemClicked(filelistitem){\r\n        //Bring up dialog that gives the option to approve/disapprove of the file's upload\r\n        //setFile(filelistitem);\r\n        \r\n    //}\r\n\r\n    return (\r\n        \r\n        <div>\r\n        <Grid item xs=\"12\">\r\n        <FormControl color=\"secondary\" variant=\"outlined\" className={classes.items} fullWidth>\r\n          <InputLabel>Filter</InputLabel>\r\n          <Select\r\n              color=\"secondary\"\r\n              onChange={handleFilterChange}\r\n              value={filter}\r\n              label=\"Filter\"\r\n              name=\"filter\"\r\n              required\r\n            >\r\n              <MenuItem value='Course Files'>Course Files</MenuItem>\r\n              <MenuItem value='Course Videos'>Course Videos</MenuItem>\r\n              <MenuItem value='Assignment Files'>Assignment Files</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </Grid>\r\n            <List>\r\n                {files.map((file) => {//filesRef.current\r\n                        let date = moment(file.upload_date).local();\r\n                        let dateString = date.format('[Uploaded On:] MM-DD-YY [at] h:mm A');\r\n                        return(\r\n                        <ListItem divider={true}> \r\n                        <ListItemText primary={\r\n                            <a href={file.url} target=\"_blank\">\r\n                                <Typography color='secondary'>{file.file_name}</Typography>\r\n                            </a>}\r\n                            secondary={dateString}></ListItemText>\r\n                            <ListItemSecondaryAction>\r\n                                <Button onClick={viewBtnClicked(file)} variant=\"contained\" color=\"secondary\" size=\"small\">\r\n                                    Review\r\n                                </Button>\r\n                            </ListItemSecondaryAction>\r\n\r\n                        </ListItem>\r\n                        );\r\n                }\r\n                )}\r\n            </List>\r\n            <ApprovalDialog selectedFile={file} open={open} setOpen={setOpen} currentFilter={filter} fileList={files}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ApprovalDialog({selectedFile, open, setOpen, currentFilter, fileList}){\r\n    var approved = null;\r\n    var filename = '';\r\n    var filterString = currentFilter.substring(0, currentFilter.length - 1);\r\n    if(selectedFile == null){\r\n        setOpen(false);\r\n    }\r\n    else{\r\n        filename = selectedFile.file_name;\r\n    }\r\n    useEffect(() => {\r\n        //check if selected file is null\r\n    });\r\n\r\n  const handleClose = () => {  \r\n    setOpen(false);\r\n  };\r\n\r\n  function approveClicked(){\r\n    if(currentFilter === 'Course Files'){\r\n        axios.put(`/course_files/approval`,{\r\n                courseID: selectedFile.course_id,\r\n                filename: selectedFile.file_name,\r\n                approved: true\r\n            }\r\n        ).then(res =>{\r\n            if(res.status === 400){\r\n              alert(res.statusText);\r\n            }\r\n            alert('File Approved');\r\n          }).catch(console.log);\r\n          fileList = fileList.filter(data => (data.file_name != selectedFile.file_name && data.course_id != selectedFile.course_id));\r\n    }\r\n    else if(currentFilter === 'Course Videos'){\r\n        axios.put(`/course_videos/approval`,{\r\n            courseID: selectedFile.course_id,\r\n            filename: selectedFile.file_name,\r\n            approved: true\r\n        }\r\n    ).then(res =>{\r\n        if(res.status === 400){\r\n          alert(res.statusText);\r\n        }\r\n        alert('Video Approved');\r\n      }).catch(console.log);\r\n    }\r\n    else if(currentFilter === 'Assignment Files'){\r\n        axios.put(`/assignment_files/approval`,{\r\n            assignmentID: selectedFile.assignment_id,\r\n            filename: selectedFile.file_name,\r\n            approved: true\r\n        }\r\n    ).then(res =>{\r\n        if(res.status === 400){\r\n          alert(res.statusText);\r\n        }\r\n        alert('Assignment File Approved');\r\n      }).catch(console.log);\r\n    }\r\n      handleClose();\r\n\r\n  }\r\n  function disapproveClicked(){\r\n\r\n    if(currentFilter === 'Course Files'){\r\n        axios.put(`/course_files/approval`,{\r\n            courseID: selectedFile.course_id,\r\n            filename: selectedFile.file_name,\r\n            approved: false\r\n        }\r\n    ).then(res =>{\r\n        if(res.status === 400){\r\n          alert(res.statusText);\r\n        }\r\n        alert('File Disapproved');\r\n      }).catch(console.log);\r\n    }\r\n    else if(currentFilter === 'Course Videos'){\r\n        axios.put(`/course_videos/approval`,{\r\n            courseID: selectedFile.course_id,\r\n            filename: selectedFile.file_name,\r\n            approved: false\r\n        }\r\n    ).then(res =>{\r\n        if(res.status === 400){\r\n          alert(res.statusText);\r\n        }\r\n        alert('Video Disapproved');\r\n      }).catch(console.log);\r\n    }\r\n    else if(currentFilter === 'Assignment Files'){\r\n        axios.put(`/assignment_files/approval`,{\r\n            assignmentID: selectedFile.assignment_id,\r\n            filename: selectedFile.file_name,\r\n            approved: false\r\n        }\r\n    ).then(res =>{\r\n        if(res.status === 400){\r\n          alert(res.statusText);\r\n        }\r\n        alert('Assignment File Disapproved');\r\n      }).catch(console.log);\r\n    }\r\n      handleClose();\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n        open = {open}\r\n        onClose = {handleClose}\r\n        aria-labelledby=\"approve-dialog-title\"\r\n        aria-describedby=\"approve-dialog-filename\" //will be filled by actual filename variable\r\n    >\r\n        <DialogTitle id=\"approve-dialog-title\">{\"Approve/Disapprove:\"}</DialogTitle>\r\n        <DialogContent>\r\n            <DialogContentText id=\"approve-dialog-filename\">\r\n                {filterString + \": \" + filename}\r\n            </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button onClick={approveClicked} color=\"secondary\">\r\n                Approve\r\n            </Button>\r\n            <Button onClick={disapproveClicked} color=\"secondary\">\r\n                Disapprove\r\n            </Button>\r\n            <Button onClick={handleClose} color=\"secondary\">\r\n                Cancel\r\n            </Button>\r\n        </DialogActions>\r\n    </Dialog>\r\n  );\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { InputLabel, FormControl, Select, Paper, TextField, Grid, MenuItem, Menu, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\n\r\nconst ITEM_HEIGHT = 50;\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  items: {\r\n    margin: theme.spacing(1),\r\n    paddingRight: theme.spacing(2)\r\n  },\r\n  root: {\r\n    '& .MuiFormControl-root': {\r\n      width: '75%',\r\n      margin: theme.spacing(1),\r\n      display: 'flex'\r\n    }\r\n  },\r\n}))\r\n\r\nfunction DisplaySearchResults(props) {\r\n  if (props.filter === 'Classes') {\r\n    return (\r\n      <table border=\"2\" width=\"100%\">\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>Department</th>\r\n          <th>Number</th>\r\n          <th>Name</th>\r\n          <th>Term</th>\r\n        </tr>\r\n        {props.searchResults.map((result) => {\r\n          return (\r\n            <tr>\r\n              <td>{result.course_id}</td>\r\n              <td>{result.course_dept}</td>\r\n              <td>{result.course_number}</td>\r\n              <td>{result.course_name}</td>\r\n              <td>{result.term}</td>\r\n            </tr>\r\n            )\r\n          }\r\n        )}\r\n      </table>\r\n    );\r\n  }\r\n  else {\r\n    return(\r\n      <table border=\"2\" width=\"100%\">\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>First</th>\r\n          <th>Last</th>\r\n          <th>Email</th>\r\n          <th>Role</th>\r\n        </tr>\r\n        {props.searchResults.map((result) => {\r\n          return (\r\n            <tr>\r\n              <td>{result.id}</td>\r\n              <td>{result.first_name}</td>\r\n              <td>{result.last_name}</td>\r\n              <td>{result.email}</td>\r\n              <td>{result.main_role}</td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </table>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default function Search() {\r\n  const classes = useStyle();\r\n  const [filter, setFilter] = React.useState(\"All Users\");\r\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\r\n  const [searchResults, setSearchResults] = React.useState([]);\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchQuery(event.target.value);\r\n    if (event.target.value.length > 1) {\r\n      if (filter === 'Classes') {\r\n        axios.get(`/search/courses/${event.target.value}`).then(res => {\r\n          setSearchResults(res.data);\r\n        }).catch(console.log);\r\n      }\r\n      else {\r\n        let role = filter;\r\n        if (role == \"All Users\") {\r\n          role = \"any\";\r\n        }\r\n        else if (role == \"Instructors\") {\r\n          role = \"instructor\";\r\n        }\r\n        else if (role == \"Students\") {\r\n          role = \"student\";\r\n        }\r\n        console.log(role);\r\n        axios.get(`/search/users/${event.target.value}/filter/${role}`).then(res => {\r\n          setSearchResults(res.data);\r\n        }).catch(console.log);\r\n      }\r\n    }\r\n    else {\r\n      setSearchResults([]);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <Grid height=\"100%\" spacing={1}>\r\n      <Grid item xs=\"12\">\r\n          <TextField \r\n            onChange={handleSearchChange}\r\n            color=\"secondary\"\r\n            label=\"Search...\"\r\n            variant=\"outlined\" \r\n            className={classes.items} fullWidth/>\r\n      </Grid>\r\n      <Grid item xs=\"12\">\r\n        <FormControl color=\"secondary\" variant=\"outlined\" className={classes.items} fullWidth>\r\n          <InputLabel>Filter</InputLabel>\r\n          <Select\r\n              color=\"secondary\"\r\n              style={{ width: 150 }}\r\n              onChange={handleFilterChange}\r\n              value={filter}\r\n              label=\"Filter\"\r\n              name=\"filter\"\r\n              required\r\n            >\r\n              <MenuItem value='Classes'>Classes</MenuItem>\r\n              <MenuItem value='Students'>Students</MenuItem>\r\n              <MenuItem value='Instructors'>Instructors</MenuItem>\r\n              <MenuItem value='All Users'>All Users</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item xs=\"12\">\r\n        \r\n        <Typography className={classes.items}>{filter}</Typography>\r\n      </Grid>\r\n      <Grid item xs=\"12\">\r\n        <DisplaySearchResults filter={filter} searchResults={searchResults} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { Paper, IconButton, Menu, MenuItem, AppBar, Toolbar, Typography, Dialog } from '@material-ui/core';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport Announcements from '../Widgets/Announcements';\r\nimport Calendar from '../Widgets/TaskCalendar';\r\nimport AddCourse from '../Widgets/AddCourse';\r\nimport CreateAnnouncement from '../Widgets/CreateAnnouncement';\r\nimport AddToClass from '../Widgets/AddToClass';\r\nimport SetRole from '../Widgets/SetRole';\r\nimport UpcomingAssignments from '../Widgets/UpcomingAssignments';\r\nimport CreateAssignment from '../Widgets/CreateAssignment';\r\nimport UnapprovedFiles from '../Widgets/UnapprovedFiles';\r\nimport Search from '../Widgets/Search';\r\n\r\nconst ITEM_HEIGHT = 50;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(3),\r\n  },\r\n  dialog: {\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  allWidgets: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n}));\r\n\r\nfunction WidgetSelect({currentWidget}) {\r\n  switch (currentWidget) {\r\n    case 'Add Course':\r\n      return (<AddCourse />);\r\n    case 'Set Role':\r\n      return (<SetRole />);\r\n    case 'Add User to Class':\r\n      return (<AddToClass />);\r\n    case 'Announcements':\r\n      return (<Announcements />);\r\n    case 'Create Announcement':\r\n      return (<CreateAnnouncement />);\r\n    case 'Calendar':\r\n      return (<Calendar />);\r\n    case 'Assignments':\r\n      return (<UpcomingAssignments />);\r\n    case 'Create Assignment':\r\n      return (<CreateAssignment />);\r\n    case 'Unapproved Files':\r\n      return (<UnapprovedFiles />);\r\n    case 'Search':\r\n      return (<Search />);\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction WidgetDialog ({currentWidget, openDialog, setOpenDialog}) {\r\n  const classes = useStyles();\r\n\r\n  const handleClose = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog fullScreen openDialog={openDialog} onClose={handleClose}>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar className={classes.toolbar}>\r\n          <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            {currentWidget}\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Paper className={classes.dialog}>\r\n        <WidgetSelect currentWidget={currentWidget} />\r\n      </Paper>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default function WidgetCase(props) {\r\n  const options = props.displayWidgets;\r\n  const [currentWidget, setCurrentWidget] = React.useState(undefined);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n  const open = Boolean(anchorEl);\r\n  const classes = useStyles();\r\n  \r\n  useEffect(() => {\r\n    setCurrentWidget(props.displayWidgets[props.widgetPosn]);\r\n  }, [props]);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  function handleClose(name) {\r\n    setAnchorEl(null);\r\n    setCurrentWidget(name);\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <div>\r\n        <AppBar position=\"static\">\r\n          <Toolbar variant=\"dense\">\r\n            <IconButton \r\n              color=\"secondary\"\r\n              edge=\"end\"\r\n              onClick={() => setOpenDialog(true)}>\r\n              <FullscreenIcon />\r\n            </IconButton>\r\n            <IconButton\r\n              aria-label=\"more\"\r\n              aria-controls=\"long-menu\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleClick}\r\n              color=\"secondary\"\r\n            >\r\n              <ArrowDropDownIcon />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"long-menu\"\r\n              anchorEl={anchorEl}\r\n              keepMounted\r\n              open={open}\r\n              onClose={() => handleClose('None')}\r\n              PaperProps={{\r\n                style: {\r\n                  maxHeight: ITEM_HEIGHT * 4.5,\r\n                },\r\n              }}\r\n            >\r\n              {options.map((option) => (\r\n                <MenuItem \r\n                  key={option} \r\n                  selected={option === currentWidget} \r\n                  onClick={() => handleClose(option)}>\r\n                  {option}\r\n                </MenuItem>\r\n              ))}\r\n            </Menu>\r\n            <Typography align=\"right\" variant=\"h6\" color=\"inherit\">\r\n              {currentWidget}\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n      <WidgetSelect currentWidget={currentWidget} />\r\n      <Dialog fullScreen open={openDialog} onClose={() => setOpenDialog(false)}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar className={classes.toolbar}>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={() => setOpenDialog(false)} aria-label=\"close\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              {currentWidget}\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Paper style={{ height: \"100vh\" }}>\r\n          <WidgetSelect currentWidget={currentWidget} className={classes.allWidgets} />\r\n        </Paper>\r\n      </Dialog>\r\n    </Paper>\r\n  );\r\n}","import React from 'react';\r\nimport WidgetCase from './WidgetCase';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Grid } from '@material-ui/core';\r\nimport LightBackground from './assets/light.jpg';\r\nimport DarkBackground from './assets/dark.png';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    minHeight: '100vh',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'cover',\r\n  },\r\n}));\r\n\r\nexport default function WidgetView(props) {\r\n  const darkState = props.darkState;\r\n  const classes = useStyles();\r\n  const currentWidgets = props.displayWidgets;\r\n  const widgetNum = props.widgetNum;\r\n  var i;\r\n\r\n  function Display() {\r\n    const items = [];\r\n    for (i = 0; i < widgetNum; i++) {\r\n      items.push(\r\n      <Grid item sm={12} md={6} maxHeight={300}>\r\n        <WidgetCase displayWidgets={currentWidgets} widgetPosn={0}/>\r\n      </Grid>);\r\n    }\r\n    return items;\r\n  }\r\n  \r\n  return(\r\n    <main className={classes.content} style={{ backgroundImage: (darkState ? ('url(' + DarkBackground + ')') : ('url(' + LightBackground + ')'))}} >\r\n      <div className={classes.toolbar} />\r\n      <Grid container height=\"100%\" spacing={1}>\r\n        <Display />\r\n      </Grid>\r\n    </main>\r\n  );\r\n}","import React, { useEffect, useState, useRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper } from '@material-ui/core';\r\nimport UserDrawer from './Drawer';\r\nimport Navbar from './Navbar';\r\nimport WidgetView from './WidgetView';\r\nimport axios from 'axios';\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst adminWidgets = ['Add Course', 'Add User to Class', 'Set Role', 'Unapproved Files', 'Search'];\r\nconst studentWidgets = ['Announcements', 'Assignments', 'Calendar', 'None'];\r\nconst instructorWidgets = ['Announcements', 'Assignments', 'Calendar', 'Create Announcement', 'Create Assignment'];\r\nlet currentRoleWidgets = [];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    minHeight: '100vh',\r\n  },\r\n  appBar: {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    marginLeft: drawerWidth,\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  // necessary for content to be below app bar\r\n  toolbar: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.default,\r\n    padding: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function Dashboard(props) {\r\n  const classes = useStyles();\r\n  const [widgetNum, setWidgetNum] = React.useState(2);\r\n  const [courses, setCourses] = useState([]);\r\n  const coursesRef = useRef([]);\r\n\r\n  function removeWidgetClick() {\r\n    setWidgetNum(widgetNum - 1);\r\n  }\r\n\r\n  function addWidgetClick() {\r\n    setWidgetNum(widgetNum + 1);\r\n  }\r\n\r\n  function getCoursesFromResponse(res) {\r\n    coursesRef.current = coursesRef.current.concat(res.data);\r\n    setCourses(coursesRef.current);\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios.get('/course_files/')\r\n      .then(res => {\r\n        console.log(res.data);\r\n      })\r\n      .catch(console.log)\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    axios.get('/roles')\r\n      .then(res => {\r\n        switch (res.data) {\r\n          case 'admin':\r\n            currentRoleWidgets = adminWidgets;\r\n            axios.get('/courses').then(getCoursesFromResponse);\r\n            break;\r\n          case 'instructor':\r\n            currentRoleWidgets = instructorWidgets;\r\n            axios.get('/courses/instructor').then(getCoursesFromResponse);\r\n            break;\r\n          case 'student':\r\n            currentRoleWidgets = studentWidgets;\r\n            axios.get('/courses/instructor').then(getCoursesFromResponse);\r\n            if (!coursesRef.current.empty) {\r\n              currentRoleWidgets = instructorWidgets;\r\n            }\r\n            axios.get('/courses/student').then(getCoursesFromResponse);\r\n            break;\r\n          default:\r\n            throw new Error('Invalid role.');\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        if (err.response.status === 401) { \r\n          props.history.push('/login');\r\n        } else {\r\n          console.log(err);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <Navbar darkState={props.darkState} handleThemeChange={props.handleThemeChange} addWidgetClick={addWidgetClick} removeWidgetClick={removeWidgetClick} widgetNum={widgetNum} />\r\n      <div className={classes.toolbar} />\r\n      <UserDrawer courses={courses}/>\r\n      <WidgetView displayWidgets={currentRoleWidgets} darkState={props.darkState} widgetNum={widgetNum} />\r\n    </Paper>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Collapse, Toolbar, AppBar, IconButton, Typography, Menu, MenuItem,  } from '@material-ui/core';\r\nimport SortIcon from '@material-ui/icons/Sort';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Link as Scroll } from 'react-scroll';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: '100vh',\r\n  },\r\n  appbar: {\r\n    background: 'none',\r\n  },\r\n  appbarWrapper: {\r\n    width: '80%',\r\n    margin: '0 auto',\r\n  },\r\n  appbarTitle: {\r\n    flexGrow: '1',\r\n    color: \"#fff\",\r\n    fontSize: '3rem',\r\n  },\r\n  icon: {\r\n    color: \"#fff\",\r\n    fontSize: '2rem',\r\n  },\r\n  colorText: {\r\n    color: \"#ADEFD1\",\r\n  },\r\n  container: {\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n  },\r\n  title: {\r\n    fontSize: '4rem',\r\n    color: \"#fff\",\r\n  },\r\n  body: {\r\n    color: \"#fff\",\r\n    fontSize: '2rem',\r\n    width: '70%',\r\n    margin: '0 auto',\r\n  },\r\n  goDown: {\r\n    color:'#fff',\r\n    fontSize:'4rem',\r\n  },\r\n  scrollRoot: {\r\n    height: '100vh',\r\n  },\r\n}));\r\n\r\nexport default function Header() {\r\n  const classes = useStyles();\r\n  const [checked, setChecked] = React.useState(false);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    setChecked(true);\r\n  },[]);\r\n\r\n  return (\r\n    <div className={classes.root} id=\"header\">\r\n      <AppBar className={classes.appbar} elevation={0}>\r\n        <Toolbar className={classes.appbarWrapper}>\r\n          <Typography variant=\"h1\" className={classes.appbarTitle}>instruct\r\n            <span className={classes.colorText}>ED</span>\r\n          </Typography>\r\n          <IconButton          \r\n            aria-label=\"menu\"\r\n            onClick={handleClick}>\r\n            <SortIcon className={classes.icon}/>\r\n          </IconButton>\r\n          <Menu\r\n            anchorEl={anchorEl}\r\n            keepMounted\r\n            open={open}\r\n            onClose={handleClose}\r\n            PaperProps={{\r\n              style: {\r\n              }\r\n            }}>\r\n            <MenuItem component={Link} to=\"/login\">Login</MenuItem>\r\n            <MenuItem component={Link} to=\"/registration\">Create Account</MenuItem>\r\n            <MenuItem component={Link} to=\"/forgotpassword\">Forgot Password</MenuItem>\r\n          </Menu>\r\n\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Collapse \r\n        in={checked}\r\n        { ...(checked ? { timeout : 1000 } : {})}\r\n        collapsedHeight={0}\r\n      >\r\n        <div className={classes.container}>\r\n          <Typography variant=\"h1\" className={classes.title}>\r\n            Welcome to <br /> instruct<span className={classes.colorText}>ED</span>\r\n          </Typography>\r\n          <Typography variant=\"h2\" className={classes.body}>\r\n            An online solution for teachers and students to organize and augment the learning experience\r\n          </Typography>\r\n          <Scroll to=\"click-options\" smooth={true}>\r\n            <IconButton>\r\n              <ExpandMoreIcon className={classes.goDown} />\r\n            </IconButton>\r\n          </Scroll>\r\n        </div>\r\n      </Collapse>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: 375,\r\n    background:'rgba(0,0,0,0.5)',\r\n    margin: '20px',\r\n    [theme.breakpoints.down('md')]:{\r\n      width: 600,\r\n    },\r\n    [theme.breakpoints.down('sm')]:{\r\n      width: 500,\r\n    },\r\n    [theme.breakpoints.down('xs')]:{\r\n      width: 400,\r\n    },\r\n  },\r\n  media: {\r\n    height: 300,\r\n    [theme.breakpoints.down('md')]:{\r\n      height: 150,\r\n    }\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n    color: '#fff',\r\n  },\r\n  desc: {\r\n    color: '#ddd',\r\n  }\r\n}));\r\n\r\nexport default function ImageCard( props ) {\r\n  const classes = useStyles();\r\n  const imageURL = props.imageUrl;\r\n\r\n  return (\r\n    <Collapse \r\n      in={props.checked}\r\n      { ... (props.checked ? { timeout: 1000 } : {})}>\r\n      <Card className={classes.root}>\r\n        <CardActionArea\r\n          component={Link}\r\n          to={props.link}>\r\n          <CardMedia\r\n            className={classes.media}\r\n            image={imageURL}\r\n            title={props.title}\r\n          />\r\n          <CardContent>\r\n            <Typography \r\n              gutterBottom \r\n              variant=\"h5\" \r\n              component=\"h2\"\r\n              className={classes.title}>\r\n              {props.title}\r\n            </Typography>\r\n            <Typography \r\n              variant=\"body2\" \r\n              color=\"textSecondary\" \r\n              component=\"p\" \r\n              className={classes.desc}>\r\n              {props.desc}\r\n            </Typography>\r\n          </CardContent>\r\n        </CardActionArea>\r\n      </Card>\r\n    </Collapse>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ImageCard from './ImageCard';\r\nimport LoginPic from './assets/login_card.jpg';\r\nimport SignUpPic from './assets/signup_card.jpg';\r\nimport ForgotPasswordPic from './assets/forgot_password_card.jpg';\r\nimport useWindowPosition from './hook/useWindowPosition';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: '100vh',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    [theme.breakpoints.down('md')]:{\r\n      flexDirection: 'column',\r\n    }\r\n  },\r\n}));\r\n\r\nexport default function LandingScroll () {\r\n  const classes = useStyles();\r\n  const checked = useWindowPosition(\"header\");\r\n  return (\r\n    <div className={classes.root} id=\"click-options\">\r\n      <ImageCard title='Login' desc='Login to your account' imageUrl={LoginPic} link=\"/login\" checked={checked}/>\r\n      <ImageCard title='Sign Up' desc='Sign up for an account' imageUrl={SignUpPic} link=\"/registration\" checked={checked}/>\r\n      <ImageCard title='Forgot Password' desc='Forgot your password? Reset your password' imageUrl={ForgotPasswordPic} link=\"/forgotpassword\" checked={checked}/>\r\n    </div>\r\n  );\r\n}","import { useLayoutEffect, useState } from 'react';\r\n\r\nexport default function useWindowPosition(id) {\r\n  const [animation, setAnimation] = useState(false);\r\n\r\n  useLayoutEffect(() => {\r\n    function updatePosition() {\r\n      const offetSetHeight = window.document.getElementById(id).offsetHeight;\r\n      if (window.pageYOffset > offetSetHeight * 0.7) {\r\n        setAnimation(true);\r\n      }\r\n    }\r\n    window.addEventListener('scroll', updatePosition);\r\n    updatePosition();\r\n    return () => window.removeEventListener('scroll', updatePosition);\r\n  }, [id]);\r\n  return animation;\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport Header from './Header';\r\nimport LandingDark from './assets/landing_dark.jpg';\r\nimport LandingScroll from './LandingScroll';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: '100vh',\r\n    backgroundImage: 'url(' + LandingDark + ')',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'cover',\r\n  },\r\n}));\r\n\r\nexport default function LandingPage() {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <Header />\r\n      <LandingScroll />\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Login from './components/LoginAndRegistration/Login'\r\nimport Registration from './components/LoginAndRegistration/Registration';\r\nimport ForgotPassword from './components/LoginAndRegistration/ForgotPassword';\r\nimport ResetPassword from './components/LoginAndRegistration/ResetPassword';\r\nimport DuoLogin from './components/LoginAndRegistration/DuoLogin';\r\nimport Dashboard from './components/Dashboard/Dashboard';\r\nimport LandingPage from './components/LoginAndRegistration/LandingPage/LandingPage';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\n\r\nfunction App() {\r\n  const [darkState, setDarkState] = React.useState(false);\r\n  const paletteType = darkState ? \"dark\" : \"light\";\r\n  const greenColor = darkState ? '#3E5465' : '#ADEFD1';\r\n  const blueColor = darkState ? '#171F26' : '#394C5E';\r\n  const backgroundColor = darkState ? '#263440' : '#F2F4F7';\r\n  \r\n  console.log(darkState);\r\n\r\n  const theme = createMuiTheme({\r\n    palette: {\r\n      primary: {\r\n        main: greenColor,\r\n      },\r\n      secondary: {\r\n        main: blueColor,\r\n      },\r\n      type: paletteType,\r\n      background: {\r\n        paper: backgroundColor,\r\n      }\r\n    },\r\n  });\r\n\r\n  const handleThemeChange = () => {\r\n    setDarkState(!darkState);\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Router>\r\n          <Switch>\r\n            <Route path=\"/\" exact component={LandingPage} />\r\n            <Route path=\"/\" exact component={LandingPage} />\r\n            <Route path=\"/login\" exact component={Login} />\r\n            <Route path='/registration' component={Registration} />\r\n            <Route path='/forgotpassword' component={ForgotPassword} />\r\n            <Route path='/resetpassword/:token' component={ResetPassword} />\r\n            <Route \r\n              path='/dashboard' \r\n              render={() => (<Dashboard darkState={darkState} handleThemeChange={handleThemeChange} />)}/>\r\n            <Route path='/duologin' component={DuoLogin} />\r\n          </Switch>\r\n        </Router>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n      <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}