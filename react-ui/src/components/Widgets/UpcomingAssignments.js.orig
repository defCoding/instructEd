import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { List, ListItemText, ListItem, Divider, Typography } from '@material-ui/core'
import moment from 'moment';
import { makeStyles } from '@material-ui/core/styles';

const useStyle = makeStyles(theme => ({
    items: {
      margin:theme.spacing(1),
    },
    root: {
      '& .MuiFormControl-root': {
        width:'75%',
        margin:theme.spacing(1),
        display:'flex'
      }
    },
  }))

export default function UpcomingAssignments() {
    const classes = useStyle();
    const [assignments, setAssignments] = useState([]);
    
    useEffect(() => {
        axios.get('/roles')
        .then(res => {
            if (res.data !== 'admin') {
                axios.get(`/assignments/upcoming/${moment(Date.now()).utc().format()}`)
                    .then(res => setAssignments(res.data))
                    .catch(console.log);
            }
        })
        .catch(err => console.log(err));
    }, []);

<<<<<<< HEAD
    return (
        <List style={{maxHeight: '300px', overflow: 'auto'}}>
            {
                assignments.map((assignment) => {
                    let assignmentdate = moment(assignment.deadline).local();
                    assignmentdate = assignmentdate.format('[Due on] MM-DD-YY [at] h:mm A');

                    return (<>
                        <ListItem style={{borderBottom: '1px solid #e0e0e0'}}>
                            <ListItemText primary={assignment.assignment_name} secondary={assignmentdate} />
                        </ListItem>
                    </>);
                })
            }
        </List>
    );
||||||| 9b94ef8
    {
        if (assignments.length > 0) {
            return (
                <List>
                {
                    assignments.map((assignment) => {
                        let assignmentdate = moment(assignment.deadline).local();
                        assignmentdate = assignmentdate.format('[Due on] MM-DD-YY [at] h:mm A');
=======
    {
        if (assignments.length > 0) {
            return (
                <List>
                {
                    assignments.reverse().map((assignment) => {
                        let assignmentdate = moment(assignment.deadline).local();
                        assignmentdate = assignmentdate.format('[Due on] MM-DD-YY [at] h:mm A');
>>>>>>> frontend
    
}
